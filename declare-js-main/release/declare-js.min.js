(()=>{"use strict";var t={d:(e,i)=>{for(var s in i)t.o(i,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:i[s]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{A:()=>F,ABSENCE:()=>U,ACTIVITY_PLACEMENT:()=>M,ARROW:()=>B,AT_LEAST:()=>D,AT_MOST:()=>W,AUTO_LAYOUT:()=>O,B:()=>H,BOTH:()=>z,CARDINALITY:()=>X,CSV_IMPORT:()=>nt,DELETE:()=>N,END:()=>Z,EXACTLY:()=>j,EXISTENCE_CONSTRAINT_PLACEMENT:()=>k,EXPORT:()=>et,HELP:()=>lt,IMPORT:()=>tt,INIT:()=>Y,JSON_EXPORT:()=>ot,JSON_IMPORT:()=>it,MOVE:()=>T,NEGATION:()=>$,NEW:()=>Q,NO_ARROW:()=>I,NO_NEGATION:()=>V,ONE:()=>J,ONE_LINE:()=>R,POSITION:()=>G,RELATION_CONSTRAINT_PLACEMENT:()=>S,SVG_EXPORT:()=>rt,TEXT_EDITOR_ARROW:()=>ct,THREE:()=>q,THREE_LINES:()=>_,TWO:()=>K,TWO_LINES:()=>P,TXT_EXPORT:()=>at,TXT_IMPORT:()=>st,ZOOM_IN:()=>ht,ZOOM_OUT:()=>dt});var i={};t.r(i),t.d(i,{ACTIVITY_PLACEMENT:()=>Ft,AUTO_LAYOUT:()=>$t,DELETE:()=>Vt,EXISTENCE_CONSTRAINT_PLACEMENT:()=>Ht,MOVE:()=>_t,RELATION_CONSTRAINT_PLACEMENT:()=>zt});var s={};t.r(s),t.d(s,{EXPORT:()=>Yt,IMPORT:()=>Xt,NEW:()=>Gt});var n={};t.r(n),t.d(n,{JSON_EXPORT:()=>Zt,SVG_EXPORT:()=>Wt,TXT_EXPORT:()=>Dt,exportSVG:()=>jt});var o={};t.r(o),t.d(o,{ZOOM_IN:()=>Jt,ZOOM_OUT:()=>Ut});var r={};t.r(r),t.d(r,{AUTO_LAYOUT:()=>ee,DELETE:()=>qt,LOCK:()=>Qt,UNLOCK:()=>te});var a=document.createElementNS("http://www.w3.org/2000/svg","defs");function l(t){t.enableEdit?(t.enableEdit=!1,t.editMenu.menuContainer.style.display="none",t.ioMenu.menuContainer.style.display="none",t.helpMenu.menuContainer.style.display="none",t.contextMenu.menuContainer.style.display="none",t.editor.close(),t.editor.collapseButton.style.display="none",t.view.shape.firstChild.setAttribute("fill","none")):(t.enableEdit=!0,t.editMenu.menuContainer.style.display="unset",t.ioMenu.menuContainer.style.display="unset",t.helpMenu.menuContainer.style.display="unset",t.contextMenu.menuContainer.style.display="unset",t.editor.collapseButton.style.display="unset",t.view.shape.firstChild.setAttribute("fill","url(#grid)"))}function h(t,e){for(const e of t.highlightedLines)t.removeLineHighlight(e);e.declareModel.removeHighlights()}function d(t){var e,i,s;!function n(){if(!0===t.autoLayout){e=Array.from(t.activities),i=Array.from(t.activities).filter((t=>!0===t.enablePhysics));for(const t of i)t.forceX=-1*(t.posX+175)*3.5,t.forceY=-1*t.posY*3.5;for(let t=0;t<e.length;t++)for(let i=t+1;i<e.length;i++){let s;s=0===e[t].relationConstraints.size||0===e[i].relationConstraints.size?6e4:1e5;let n,o,r=e[t].getPosition(),a=e[i].getPosition(),l=a.x-r.x,h=a.y-r.y,d=l**2+h**2;0!==d?(n=l/d*s,o=h/d*s):(n=Math.random(),o=Math.random()),e[t].forceX-=n,e[t].forceY-=o,e[i].forceX+=n,e[i].forceY+=o}for(const t of i)for(const e of t.getConnectedActivities()){let i=t.posX-e.posX,s=t.posY-e.posY;t.forceX-=i,t.forceY-=s,e.forceX+=i,e.forceY+=s}s=Array.from(t.activities).filter((t=>0!==t.existenceConstraints.size));for(const t of s){let e=20*t.getConnectedActivities().size;for(const i of t.getConnectedActivities()){let s=t.getPosition(),n=i.getPosition(),o=n.x-s.x,r=n.y-s.y,a=Math.acos(-1*r/Math.sqrt(o**2+r**2))*(180/Math.PI);if(a<e){let s=60*(e-a);o>0?t.forceX-=s:t.forceX+=s,o>0?i.forceX+=s:i.forceX-=s}}}new Map,t.autoLayout=!1;for(const e of i)!1===t.autoLayout&&Math.abs(e.forceX)+Math.abs(e.forceY)>4&&(t.autoLayout=!0),e.physicsUpdate();setTimeout(n,10)}}()}function c(t,e){let i=t.getAttribute("elem_id");if(i&&"undefined"!==i)e.declareModel.deleteExistenceConstraint(i,!1),e.declareModel.deleteRelationConstraint(i,!1),t.removeAttribute("elem_id");else if("editorContainer"===t.getAttribute("class"))for(const s of t.childNodes)if(i=s.getAttribute("elem_id"),i&&"undefined"!==i&&!s.firstChild.wholeText)return e.declareModel.deleteExistenceConstraint(i),e.declareModel.deleteRelationConstraint(i),void t.removeAttribute("elem_id")}function u(t,e){let i=t.firstChild.wholeText,s=e.declareModel.addConstraint(i,!0);s?(t.style.color="black",t.setAttribute("elem_id",s)):t.style.color="red"}function C(){return Date.now().toString(36)+Math.floor(Math.pow(10,12)+9*Math.random()*Math.pow(10,12)).toString(36)}function p(t){let e="";for(let i=0;i<t;i++)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return e}function m(t){return 20*Math.round(t/20)}function g(t,e){var i=e.getScreenCTM();return t.touches&&(t=t.touches[0]),{x:t.clientX-i.e/i.a,y:t.clientY-i.f/i.d}}function w(t,e){var i=g(t,e.canvas);return{x:i.x*(1/e.zoomLevel)-e.view.posX*(1/e.zoomLevel),y:i.y*(1/e.zoomLevel)-e.view.posY*(1/e.zoomLevel)}}function v(t,e){for(const i of t)f(i,e);return e}function f(t,e){for(const i of e)if(i.toString()===t.toString())return i;return e.add(t),t}function y(t,e){for(let i of t.getEdges()){let t=e.coordA;for(let s=1;s<=100;s++){const n=s/100;let o=e.calculateBezierPoint(n);const r=e.lineIntersection(t,o,i.startPoint,i.endPoint);if(r)return r;t=o}}}a.innerHTML='\n    <pattern id="grid" width="20" height="20" patternUnits="userSpaceOnUse">\n        <circle cx="0" cy="0" r="2" fill="#d9d9d9"/>\n    </pattern>\n';class x{constructor(t,e,i,s){this.id=e+"_"+C(),this.posX=i,this.posY=s,this.shape=document.createElementNS("http://www.w3.org/2000/svg",t),this.shape.setAttribute("id",this.id),this.shape.setAttribute("transform","matrix(1, 0, 0, 1,"+this.posX+","+this.posY+")")}addToView(t){t.appendChild(this.shape)}setPosition(t){this.posX=t.x,this.posY=t.y,this.shape.transform.baseVal.getItem(0).matrix.e=this.posX,this.shape.transform.baseVal.getItem(0).matrix.f=this.posY}getPosition(){return{x:this.posX,y:this.posY}}destroy(){this.shape.remove()}}class b extends x{constructor(t,e,i){super("g","activity-group",e,i),this.width=100,this.height=60,this.rect=document.createElementNS("http://www.w3.org/2000/svg","rect"),this.rect.setAttribute("x",0),this.rect.setAttribute("y",0),this.rect.setAttribute("width",this.width),this.rect.setAttribute("height",this.height),this.rect.setAttribute("rx",10),this.rect.setAttribute("ry",10),this.rect.setAttribute("style","fill:white; stroke:gray; stroke-width:1"),this.rect.setAttribute("type","activity"),this.shape.appendChild(this.rect),this.shape.setAttribute("draggable","true"),this.label=new A(t,this),this.label.changeColor("gray"),this.existenceConstraints=new Set,this.relationConstraints=new Set,this.hoverHighlight=!1,this.selectionHighlight=!1,this.forceX,this.forceY,this.enablePhysics=!0,this.editMode=!1}addToView(t){super.addToView(t),this.label.setPosition(),this.label.addToView(t)}getCenterCoord(){return{x:this.posX+this.width/2,y:this.posY+this.height/2}}getEdges(){const t=this.getCenterCoord(),e={x:t.x-this.width/2,y:t.y-this.height/2},i={x:e.x+this.width,y:e.y},s={x:i.x,y:i.y+this.height},n={x:e.x,y:e.y+this.height};return[{startPoint:e,endPoint:i},{startPoint:i,endPoint:s},{startPoint:s,endPoint:n},{startPoint:n,endPoint:e}]}setPosition(t){super.setPosition(t);for(const t of this.relationConstraints)t.setPosition(t.activityA===this,this.getCenterCoord());this.positionExistenceConstraints()}alignToGrid(){this.setPosition({x:m(this.posX),y:m(this.posY)})}physicsUpdate(){this.setPosition({x:this.posX+this.forceX/50,y:this.posY+this.forceY/50})}getConnectedActivities(){let t=new Set;for(const e of this.relationConstraints)t=v(t,e.getActivities());return t.delete(this),t}getConstraints(){let t=new Set;return v(this.existenceConstraints,t),v(this.relationConstraints,t),t}positionExistenceConstraints(){let t=0;0===this.existenceConstraints.size&&0===this.relationConstraints.size||(this.rect.style.stroke="black",this.label.changeColor("black")),this.existenceConstraints.forEach((e=>{t+=e.width+3})),t-=3;let e=this.getCenterCoord().x-t/2;for(const t of this.existenceConstraints)t.setPosition({x:e,y:this.getCenterCoord().y-this.height/2-t.height}),e+=t.width+3}enableEditMode(t){this.editMode=!0,this.label.hide();let e=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");e.setAttribute("x",5),e.setAttribute("y",5),e.setAttribute("width",this.width-10),e.setAttribute("height",this.height-10);let i=document.createElement("input");i.style.width="100%",i.style.height="100%",i.style.border="1px solid gray",i.style.outline="none",i.style.textAlign="center",i.value=this.label.toString(),e.appendChild(i),this.shape.appendChild(e),i.focus(),i.addEventListener("blur",(()=>{this.updateLabel(i.value,t),t.updateActivity(this),this.shape.removeChild(e),this.disableEditMode()})),i.addEventListener("keydown",(t=>{"Enter"===t.key&&i.blur()}))}disableEditMode(){this.editMode=!1,this.label.show(),this.shape.setAttribute("contenteditable","false")}updateLabel(t,e){this.label.setText(t);for(const t of this.existenceConstraints)e.updateConstraint(t);for(const t of this.relationConstraints)e.updateConstraint(t)}enableSelection(){this.addFrame("#BD86E6"),this.selectionHighlight=!0}disableSelection(){this.removeFrame(),this.selectionHighlight=!1}enableHighlight(){this.rect.style.fill="#d3d3d3",this.hoverHighlight=!0}disableHighlight(){this.rect.style.fill="white",this.hoverHighlight=!1}enableWarning(){this.addFrame("#ffa9a9")}disableWarning(){this.selectionHighlight?this.enableSelectionHighlight():this.removeFrame()}lock(){this.enablePhysics&&(this.enablePhysics=!1,this.addLockSymbol())}unlock(){this.enablePhysics=!0,this.lockIcon&&(this.lockIcon.remove(),this.lockIcon=null)}addLockSymbol(){const t="http://www.w3.org/2000/svg";this.lockIcon=document.createElementNS(t,"svg"),this.lockIcon.setAttribute("viewBox","0 0 94.38 122.88"),this.lockIcon.setAttribute("width","15"),this.lockIcon.setAttribute("height","20"),this.lockIcon.setAttribute("x",this.width-25),this.lockIcon.setAttribute("y",this.height-25);const e=document.createElementNS(t,"g"),i=document.createElementNS(t,"path");i.setAttribute("d","M8.723,45.706h2.894v-8.729c0-10.139,3.987-19.368,10.412-26.069C28.479,4.177,37.386,0,47.19,0 c9.805,0,18.711,4.177,25.163,10.907c6.424,6.701,10.411,15.931,10.411,26.069v8.729h2.894c2.401,0,4.583,0.98,6.162,2.56 s2.56,3.761,2.56,6.162v59.73c0,2.401-0.98,4.583-2.56,6.162s-3.761,2.56-6.162,2.56H8.723c-2.402,0-4.583-0.98-6.163-2.56 S0,116.56,0,114.158v-59.73c0-2.401,0.981-4.583,2.56-6.162C4.14,46.687,6.321,45.706,8.723,45.706L8.723,45.706z M44,87.301 L39.81,98.28h14.762l-3.884-11.13c2.465-1.27,4.15-3.84,4.15-6.803c0-4.223-3.425-7.647-7.647-7.647 c-4.223,0-7.648,3.425-7.648,7.647C39.542,83.432,41.369,86.091,44,87.301L44,87.301z M17.753,45.706h58.875v-8.729 c0-8.511-3.326-16.236-8.686-21.826C62.61,9.589,55.265,6.137,47.19,6.137S31.77,9.589,26.438,15.15 c-5.359,5.59-8.686,13.315-8.686,21.826V45.706L17.753,45.706z M85.658,51.843H8.723c-0.708,0-1.353,0.292-1.823,0.762 c-0.47,0.47-0.762,1.116-0.762,1.823v59.73c0,0.707,0.292,1.353,0.762,1.822c0.47,0.471,1.116,0.762,1.823,0.762h76.936 c0.708,0,1.354-0.291,1.823-0.762c0.47-0.47,0.762-1.115,0.762-1.822v-59.73c0-0.707-0.292-1.353-0.762-1.823 C87.011,52.135,86.366,51.843,85.658,51.843L85.658,51.843z"),e.appendChild(i),this.lockIcon.appendChild(e),this.shape.appendChild(this.lockIcon)}addFrame(t){this.shape.contains(this.frame)&&this.shape.removeChild(this.frame),this.frame=document.createElementNS("http://www.w3.org/2000/svg","rect"),this.frame.setAttribute("x",-5),this.frame.setAttribute("y",-5),this.frame.setAttribute("width",this.width+10),this.frame.setAttribute("height",this.height+10),this.frame.setAttribute("rx",15),this.frame.setAttribute("ry",15),this.frame.setAttribute("style","fill:none; stroke-width:2"),this.frame.style.stroke=t,this.shape.appendChild(this.frame)}removeFrame(){this.frame&&this.frame.remove()}exportToJSON(){return{name:this.toString(),posX:this.posX,posY:this.posY}}toString(){return this.label.toString()}destroy(){super.destroy(),this.label.destroy()}}class A extends x{constructor(t,e){super("text","label",0,0),this.parent=e,this.text=t,this.shape.setAttribute("x",0),this.shape.setAttribute("y",0),this.shape.setAttribute("dominant-baseline","middle"),this.shape.setAttribute("text-anchor","middle"),this.shape.classList.add("label"),this.shape.textContent="",this.shape.style.fontFamily="Arial, sans-serif",this.shape.style.fill="black",this.shape.style.userSelect="none",this.shape.style.fontSize=e instanceof L?"10px":"14px",this.changeFontSize(this.adjustFontSize()),t&&this.setText(t)}addToView(){this.parent.shape.appendChild(this.shape)}setPosition(){this.shape.transform.baseVal.getItem(0).matrix.e=this.parent.width/2,this.shape.transform.baseVal.getItem(0).matrix.f=this.parent.height/2}toString(){return this.text?this.text:""}setText(t){for(;this.shape.firstChild;)this.shape.removeChild(this.shape.firstChild);this.text=t;let e=document.createElement("canvas").getContext("2d");e.font=this.shape.style.fontSize+" Arial, sans-serif";let i=function(t,e,i){let s=e.split(" "),n=[],o=s[0];for(let e=1;e<s.length;e++){let i=s[e];t.measureText(o+" "+i).width<50?o+=" "+i:(n.push(o),o=i)}return n.push(o),n}(e,t);const s=-1.2*i.length/2+.6;i.forEach(((t,e)=>{let i=document.createElementNS("http://www.w3.org/2000/svg","tspan");i.textContent=t,i.setAttribute("x",0),i.setAttribute("dy",`${0===e?s:1.2}em`),this.shape.appendChild(i)})),this.changeFontSize(this.adjustFontSize(i))}adjustFontSize(t=[this.text]){if(this.parent instanceof b){let e=t.join(" ").length;return 1===t.length?e<=10?"14px":e>10&&e<=12?"12px":e>12&&e<=15?"10px":"9px":"12px"}}changeColor(t){this.shape.style.fill=t}changeFontSize(t){this.shape.style.fontSize=t}hide(){this.shape.setAttribute("visibility","hidden")}show(){this.shape.setAttribute("visibility","visible")}}class L extends x{constructor(t,e){super("g","existenceConstraintGroup",0,0),this.activityA=t,this.template=e,this.factors,this.label=new A(this.determineLabel(),this),this.width=20,this.height=15,this.rect=document.createElementNS("http://www.w3.org/2000/svg","rect"),this.rect.setAttribute("x",0),this.rect.setAttribute("y",0),this.rect.setAttribute("width",this.width),this.rect.setAttribute("height",this.height),this.rect.setAttribute("style","fill:white; stroke:black; stroke-width:1"),this.rect.setAttribute("type","existenceConstraint"),this.shape.appendChild(this.rect)}addToView(t){super.addToView(t),this.label.setPosition(),this.label.addToView()}getActivities(){return new Set([this.activityA])}updateTemplate(t){this.template=t,this.label.shape.textContent=this.determineLabel()}getCenterCoord(){return{x:this.posX+this.width/4,y:this.posY+this.height/2}}toString(){return this.template+"('"+this.activityA.label.toString()+"')"}addFactors(t){this.factors=t}enableSelection(){this.addFrame("#BD86E6")}disableSelection(){this.removeFrame()}enableHighlight(){this.rect.style.fill="#d3d3d3"}disableHighlight(){this.rect.style.fill="white"}addFrame(t){this.frame&&this.frame.remove(),this.frame=document.createElementNS("http://www.w3.org/2000/svg","rect"),this.frame.setAttribute("x",-2.5),this.frame.setAttribute("y",-2.5),this.frame.setAttribute("width",this.width+5),this.frame.setAttribute("height",this.height+5),this.frame.setAttribute("rx",5),this.frame.setAttribute("ry",5),this.frame.setAttribute("style","fill:transparent; stroke-width:2"),this.frame.style.stroke=t,this.shape.appendChild(this.frame)}removeFrame(){this.frame&&this.frame.remove()}destroy(){super.destroy(),this.label.destroy(),this.activityA&&this.activityA.existenceConstraints.delete(this)}exportToJSON(){return{template:this.template,parameters:[this.activityA.label.toString()],...this.factors}}determineLabel(){switch(this.template){case"Init":return"Init";case"End":return"End";case"AtLeastOne":return"1..*";case"AtLeastTwo":return"2..*";case"AtLeastThree":return"3..*";case"ExactlyOne":return"1";case"ExactlyTwo":return"2";case"ExactlyThree":return"3";case"AtMostOne":return"0..1";case"AtMostTwo":return"0..2";case"AtMostThree":return"0..3";case"Absence":return"0"}}}class E{constructor(t,e,i){this.id="relationConstraint_"+C(),this.activityA=t,this.activityB=e,this.template=i,this.factors,this.pathCount=this.identifyPathCount(i),this.directed=this.isDirected(i),this.activationA=this.isActivatedByA(i),this.activationB=this.isActivatedByB(i),this.negation=this.isNegation(i),this.pathGroup=document.createElementNS("http://www.w3.org/2000/svg","g"),this.pathGroup.setAttribute("id",this.id),this.paths=Array.from({length:this.pathCount},(()=>{const t=document.createElementNS("http://www.w3.org/2000/svg","path");return t.setAttribute("style","stroke:black; stroke-width:1; fill:none"),t})),this.coordA={x:0,y:0},this.coordB={x:0,y:0},this.intersectionA={x:0,y:0},this.intersectionB={x:0,y:0},this.curveMagnitude=this.calculateCurvatureMagnitude(),this.coloredPath=document.createElementNS("http://www.w3.org/2000/svg","path"),this.coloredPath.setAttribute("style","stroke:transparent; stroke-width:18; fill:none"),this.selectionHighlight=!1,this.createArrowsAndCircles(),this.setPosition()}addPathToView(t){t.appendChild(this.pathGroup),this.pathGroup.appendChild(this.coloredPath);for(const t of this.paths)this.pathGroup.appendChild(t);this.directed&&this.pathCount>1&&(this.pathGroup.appendChild(this.whiteCover1),this.pathGroup.appendChild(this.whiteCover2)),this.negation&&(this.pathGroup.appendChild(this.negationLine1),this.pathGroup.appendChild(this.negationLine2))}addArrowsAndCirclesToView(t){this.activationA&&t.appendChild(this.circleA),this.activationB&&t.appendChild(this.circleB),this.directed&&t.appendChild(this.arrow)}createArrowsAndCircles(){this.activationA&&(this.circleA=document.createElementNS("http://www.w3.org/2000/svg","circle"),this.circleA.setAttribute("r","7"),this.circleA.style.fill="#000000",this.circleA.style.pointerEvents="none"),this.activationB&&(this.circleB=document.createElementNS("http://www.w3.org/2000/svg","circle"),this.circleB.setAttribute("r","7"),this.circleB.style.fill="#000000",this.circleB.style.pointerEvents="none"),this.directed&&(this.arrow=document.createElementNS("http://www.w3.org/2000/svg","polygon"),this.arrow.setAttribute("points","-8,-8 10,0 -8,8"),this.arrow.style.fill="#000000",this.arrow.style.pointerEvents="none"),this.directed&&this.pathCount>1&&(this.whiteCover1=document.createElementNS("http://www.w3.org/2000/svg","circle"),this.whiteCover1.setAttribute("r","8"),this.whiteCover1.style.fill="#FFFFFF",this.whiteCover1.style.pointerEvents="none",this.whiteCover2=document.createElementNS("http://www.w3.org/2000/svg","circle"),this.whiteCover2.setAttribute("r","10"),this.whiteCover2.style.fill="#FFFFFF",this.whiteCover2.style.pointerEvents="none"),this.negation&&(this.negationLine1=document.createElementNS("http://www.w3.org/2000/svg","line"),this.negationLine1.setAttribute("style","stroke:black; stroke-width:1"),this.negationLine2=document.createElementNS("http://www.w3.org/2000/svg","line"),this.negationLine2.setAttribute("style","stroke:black; stroke-width:1")),this.setPosition()}setPosition(){this.activityA&&(this.coordA=this.activityA.getCenterCoord()),this.activityB&&(this.coordB=this.activityB.getCenterCoord()),this.activityA&&(this.intersectionA=y(this.activityA,this)),this.activityB&&(this.intersectionB=y(this.activityB,this)),this.updatePaths(),this.updateArrows(),this.updateNegations()}updatePaths(){const t=Math.atan2(this.coordB.y-this.coordA.y,this.coordB.x-this.coordA.x);this.paths=this.paths.map(((e,i)=>{let s=this.coordB.x-this.coordA.x,n=this.coordB.y-this.coordA.y,o=Math.sqrt(s*s+n*n);if(s/=o,n/=o,this.cpX=(this.coordA.x+this.coordB.x)/2-n*this.curveMagnitude*o,this.cpY=(this.coordA.y+this.coordB.y)/2+s*this.curveMagnitude*o,e.setAttribute("d",`M ${this.coordA.x} ${this.coordA.y} Q ${this.cpX} ${this.cpY}, ${this.coordB.x} ${this.coordB.y}`),this.coloredPath.setAttribute("d",`M ${this.coordA.x} ${this.coordA.y} Q ${this.cpX} ${this.cpY}, ${this.coordB.x} ${this.coordB.y}`),this.pathCount>1){const s=3*(1+this.curveMagnitude)*(i-(this.paths.length-1)/2),n=s*Math.sin(-t),o=s*Math.cos(-t);e.setAttribute("transform",`translate(${n},${o})`)}return e}))}updateArrows(){if(this.length=this.calculateCurveLength(),void 0===this.intersectionA&&this.circleA?this.circleA.style.visibility="hidden":this.activationA&&this.circleA&&(this.circleA.style.visibility="unset",this.circleA.setAttribute("cx",this.intersectionA.x),this.circleA.setAttribute("cy",this.intersectionA.y)),void 0===this.intersectionB&&this.circleB?this.circleB.style.visibility="hidden":this.activationB&&this.circleB&&(this.circleB.style.visibility="unset",this.circleB.setAttribute("cx",this.intersectionB.x),this.circleB.setAttribute("cy",this.intersectionB.y)),void 0===this.intersectionB&&this.arrow)this.arrow.style.visibility="hidden";else if(this.directed&&this.arrow){this.arrow.style.visibility="unset";const t=this.calculateBezierTangent(.9),e=Math.atan2(t.y,t.x),i=this.activationB?16:9,s=this.intersectionB.x-i*Math.cos(e),n=this.intersectionB.y-i*Math.sin(e);this.whiteCover1&&this.whiteCover2&&(this.whiteCover1.setAttribute("cx",s),this.whiteCover1.setAttribute("cy",n),this.whiteCover2.setAttribute("cx",this.intersectionB.x),this.whiteCover2.setAttribute("cy",this.intersectionB.y)),this.arrow.setAttribute("transform",`translate(${s},${n}) rotate(${180*e/Math.PI})`)}}updateNegations(){if(this.negation&&this.negationLine1&&this.negationLine2){const t=this.calculateBezierTangent(.5),e=Math.atan2(t.y,t.x),i=15,s=3,n=this.calculateBezierPoint(.5),o={x:n.x-s/2*Math.cos(e),y:n.y-s/2*Math.sin(e)},r={x:n.x+s/2*Math.cos(e),y:n.y+s/2*Math.sin(e)};this.negationLine1.setAttribute("x1",o.x-i/2*Math.sin(e)),this.negationLine1.setAttribute("y1",o.y+i/2*Math.cos(e)),this.negationLine1.setAttribute("x2",o.x+i/2*Math.sin(e)),this.negationLine1.setAttribute("y2",o.y-i/2*Math.cos(e)),this.negationLine2.setAttribute("x1",r.x-i/2*Math.sin(e)),this.negationLine2.setAttribute("y1",r.y+i/2*Math.cos(e)),this.negationLine2.setAttribute("x2",r.x+i/2*Math.sin(e)),this.negationLine2.setAttribute("y2",r.y-i/2*Math.cos(e))}}setPositionManually(t){this.activityA&&(this.intersectionA=y(this.activityA,this)),this.coordB=t,this.intersectionB=t,this.updatePaths(),this.updateArrows(),this.updateNegations()}updateTemplate(t,e){if(this.removeDecorations(),this.template=t,this.pathCount=this.identifyPathCount(t),this.paths=Array.from({length:this.pathCount},(()=>{const t=document.createElementNS("http://www.w3.org/2000/svg","path");return t.setAttribute("style","stroke:black; stroke-width:1; fill:none"),t})),this.directed=this.isDirected(t),this.activationA=this.isActivatedByA(t),this.activationB=this.isActivatedByB(t),this.negation=this.isNegation(t),this.createArrowsAndCircles(),this.addPathToView(e),this.activityA){this.activityA.addToView(e);for(const t of this.activityA.relationConstraints)t.addArrowsAndCirclesToView(e)}if(this.activityB){this.activityB.addToView(e);for(const t of this.activityB.relationConstraints)t.addArrowsAndCirclesToView(e)}}getActivities(){return new Set([this.activityA,this.activityB])}toString(){return`${this.template}('${this.activityA.label.toString()}','${this.activityB.label.toString()}')`}addFactors(t){this.factors=t}calculateBezierPoint(t){return{x:(1-t)*(1-t)*this.coordA.x+2*(1-t)*t*this.cpX+t*t*this.coordB.x,y:(1-t)*(1-t)*this.coordA.y+2*(1-t)*t*this.cpY+t*t*this.coordB.y}}lineIntersection(t,e,i,s){const n=(s.y-i.y)*(e.x-t.x)-(s.x-i.x)*(e.y-t.y),o=((s.x-i.x)*(t.y-i.y)-(s.y-i.y)*(t.x-i.x))/n,r=((e.x-t.x)*(t.y-i.y)-(e.y-t.y)*(t.x-i.x))/n;if(0<=o&&o<=1&&0<=r&&r<=1)return{x:t.x+o*(e.x-t.x),y:t.y+o*(e.y-t.y)}}calculateBezierTangent(t){const e=this.coordA,i=this.cpX,s=this.cpY,n=this.coordB;return{x:2*(1-t)*(i-e.x)+2*t*(n.x-i),y:2*(1-t)*(s-e.y)+2*t*(n.y-s)}}calculateCurveLength(){let t=0;for(let e=0;e<100;e++){const i=e/100,s=this.calculateBezierTangent(i);t+=.01*Math.sqrt(s.x*s.x+s.y*s.y)}return t}calculateCurvatureMagnitude(){var t=0;for(const e of this.activityA.relationConstraints)e.getActivities().has(this.activityB)&&t++;return.27*t}enableSelection(){this.coloredPath.setAttribute("style","stroke:#BD86E6; stroke-width:15; fill:none"),this.whiteCover1&&(this.whiteCover1.style.fill="#BD86E6"),this.whiteCover1&&(this.whiteCover2.style.fill="#BD86E6"),this.selectionHighlight=!0}disableSelection(){this.coloredPath.setAttribute("style","stroke:transparent; stroke-width:15; fill:none"),this.whiteCover1&&(this.whiteCover1.style.fill="#FFFFFF"),this.whiteCover2&&(this.whiteCover2.style.fill="#FFFFFF"),this.selectionHighlight=!1}enableHighlight(){this.selectionHighlight||(this.coloredPath.setAttribute("style","stroke:#d3d3d3; stroke-width:15; fill:none"),this.whiteCover1&&(this.whiteCover1.style.fill="#d3d3d3"),this.whiteCover2&&(this.whiteCover2.style.fill="#d3d3d3"))}disableHighlight(){this.selectionHighlight||(this.coloredPath.setAttribute("style","stroke:transparent; stroke-width:15; fill:none"),this.whiteCover1&&(this.whiteCover1.style.fill="#FFFFFF"),this.whiteCover2&&(this.whiteCover2.style.fill="#FFFFFF"))}enableWarning(){this.coloredPath.setAttribute("style","stroke:#ffa9a9; stroke-width:15; fill:none")}disableWarning(){this.selectionHighlight?this.enableSelectionHighlight():this.removeFrame()}destroy(){this.pathGroup.remove(),this.removeDecorations(),this.activityA&&this.activityA.relationConstraints.delete(this),this.activityB&&this.activityB.relationConstraints.delete(this)}removeDecorations(){for(const t of this.paths)t.remove();this.activationA&&this.circleA.remove(),this.activationB&&this.circleB.remove(),this.directed&&this.arrow.remove(),this.directed&&this.pathCount>1&&(this.whiteCover1.remove(),this.whiteCover2.remove()),this.negation&&(this.negationLine1.remove(),this.negationLine2.remove())}exportToJSON(){return{template:this.template,parameters:[[this.activityA.label.toString()],[this.activityB.label.toString()]],...this.factors}}identifyPathCount(t){return t.includes("Chain")?3:t.includes("Alternate")?2:1}isDirected(t){return t.includes("Response")||t.includes("Succession")||t.includes("Precedence")}isActivatedByA(t){return t.includes("Response")||t.includes("Succession")||t.includes("RespondedExistence")||t.includes("CoExistence")}isActivatedByB(t){return t.includes("Precedence")||t.includes("Succession")||t.includes("CoExistence")}isNegation(t){return t.includes("Not")}}var T='\n<svg width="100%" height="100%" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n    <g transform="matrix(0.260163,0,0,0.260163,16,16)">\n        <g id="move.svg" transform="matrix(1,0,0,1,-61.5,-61.5)">\n            <clipPath id="_clip1">\n                <rect x="0" y="0" width="123" height="123"/>\n            </clipPath>\n            <g clip-path="url(#_clip1)">\n                <path d="M61.44,0L61.458,-0C95.174,-0 122.918,27.744 122.918,61.46C122.918,95.176 95.174,122.92 61.458,122.92C27.742,122.92 -0.002,95.176 -0.002,61.46C-0.002,45.165 6.478,29.522 18,18C29.501,6.46 45.147,-0.023 61.44,-0ZM99.44,23.44C89.366,13.366 75.687,7.7 61.44,7.7C31.959,7.7 7.7,31.959 7.7,61.44C7.7,90.921 31.959,115.18 61.44,115.18C90.921,115.18 115.18,90.921 115.18,61.44C115.198,47.189 109.529,33.504 99.44,23.44Z" style="fill-rule:nonzero;"/>\n                <g transform="matrix(0.572111,0,0,0.572111,26.2895,26.2895)">\n                    <g>\n                        <g>\n                            <path d="M61.44,0L37.02,25.4L52.74,25.4L52.74,52.74L25.4,52.74L25.4,37.02L0,61.44L25.4,85.86L25.4,70.15L52.74,70.15L52.74,97.48L37.02,97.48L61.44,122.88L85.86,97.48L70.15,97.48L70.15,70.15L97.48,70.15L97.48,85.86L122.88,61.44L97.48,37.02L97.48,52.74L70.15,52.74L70.15,25.4L85.86,25.4L61.44,0Z"/>\n                        </g>\n                    </g>\n                </g>\n            </g>\n        </g>\n        <g id="move.svg1" serif:id="move.svg">\n        </g>\n    </g>\n</svg>\n',M='\n<svg width="100%" height="100%" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-miterlimit:8;">\n    <g transform="matrix(0.0585126,0,0,0.0585126,-157.892,-78.9462)">\n        <g>\n            <path d="M2709.5,1515C2709.5,1486.01 2733.01,1462.5 2762,1462.5L3181,1462.5C3209.99,1462.5 3233.5,1486.01 3233.5,1515L3233.5,1725C3233.5,1753.99 3209.99,1777.5 3181,1777.5L2762,1777.5C2733.01,1777.5 2709.5,1753.99 2709.5,1725L2709.5,1515Z" style="fill:white;stroke:black;stroke-width:22.92px;"/>\n        </g>\n    </g>\n</svg>\n',k='\n<svg width="100%" height="100%" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-miterlimit:8;">\n    <g transform="matrix(0.0592203,0,0,0.0592203,-160.121,-106.142)">\n        <g>\n            <rect x="2714.5" y="1899.5" width="285" height="213" style="fill:white;stroke:black;stroke-width:20.63px;"/>\n            <g transform="matrix(1,0,0,1,2767.09,2050)">\n                <text x="0px" y="0px" style="font-family:\'ArialMT\', \'Arial\', sans-serif;font-size:119px;">1..*</text>\n            </g>\n            <rect x="2949.5" y="2011.5" width="284" height="214" style="fill:white;stroke:black;stroke-width:20.63px;"/>\n            <g transform="matrix(1,0,0,1,3005.32,2166)">\n                <text x="0px" y="0px" style="font-family:\'ArialMT\', \'Arial\', sans-serif;font-size:128px;">Init</text>\n            </g>\n        </g>\n    </g>\n</svg>\n',S='\n<svg width="100%" height="100%" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-miterlimit:8;">\n    <g transform="matrix(0.0795583,0,0,0.0795583,-17.9006,-184.049)">\n        <g>\n            <path d="M225,2514L614.764,2514" style="fill:none;stroke:black;stroke-width:13.75px;"/>\n            <path d="M527.5,2460.5L622.5,2514.5L527.5,2568.5L527.5,2460.5Z" style="stroke:black;stroke-width:4.58px;"/>\n        </g>\n    </g>\n</svg>\n',N='\n<svg width="100%" height="100%" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n    <g transform="matrix(0.260332,0,0,0.260332,-0.00147934,-4.51125e-05)">\n        <path d="M61.44,0L61.458,-0C95.174,-0 122.918,27.744 122.918,61.46C122.918,95.176 95.174,122.92 61.458,122.92C27.742,122.92 -0.002,95.176 -0.002,61.46C-0.002,45.165 6.478,29.522 18,18C29.501,6.46 45.147,-0.023 61.44,-0ZM99.44,23.44C89.366,13.366 75.687,7.7 61.44,7.7C31.959,7.7 7.7,31.959 7.7,61.44C7.7,90.921 31.959,115.18 61.44,115.18C90.921,115.18 115.18,90.921 115.18,61.44C115.198,47.189 109.529,33.504 99.44,23.44Z" style="fill-rule:nonzero;"/>\n    </g>\n    <g transform="matrix(0.131846,0,0,0.131846,8.77582,7.89416)">\n        <g>\n            <g>\n                <g>\n                    <g>\n                        <path d="M2.347,9.633L40.644,9.633L40.644,3.76C40.644,1.692 42.333,0 44.404,0L65.548,0C67.618,0 69.308,1.691 69.308,3.76L69.308,9.634L107.138,9.634C108.431,9.634 109.485,10.691 109.485,11.983L109.485,23.497L0,23.497L0,11.982C0,10.69 1.055,9.633 2.347,9.633ZM8.69,29.605L101.611,29.605C103.548,29.605 105.307,31.204 105.132,33.129L97.268,119.358C97.094,121.284 95.678,122.879 93.745,122.879L16.445,122.879C14.511,122.879 13.093,121.287 12.921,119.358L5.166,33.129C4.994,31.197 6.751,29.605 8.69,29.605ZM69.077,42.998L78.943,42.998L78.943,108.312L69.077,108.312L69.077,42.998ZM30.072,42.998L39.939,42.998L39.939,108.312L30.072,108.312L30.072,42.998ZM49.572,42.998L59.441,42.998L59.441,108.312L49.572,108.312L49.572,42.998Z"/>\n                    </g>\n                </g>\n            </g>\n        </g>\n    </g>\n</svg>\n',O='\n<svg width="100%" height="100%" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n    <g transform="matrix(0.333333,0,0,0.333333,0,1.68667)">\n        <path d="M90.21,50.93C88.34,60.85 83.05,69.57 75.62,75.82C68.15,82.1 58.52,85.88 48.02,85.88C38.15,85.88 29.05,82.54 21.79,76.93C14.38,71.2 8.89,63.1 6.46,53.76L11.82,52.37C13.93,60.5 18.71,67.56 25.17,72.55C31.48,77.43 39.4,80.33 48.01,80.33C57.18,80.33 65.56,77.04 72.05,71.59C78.26,66.37 82.75,59.16 84.54,50.94L78.82,50.94L87.41,40.48L96,50.93L90.21,50.93ZM61.35,27.23C61.3,27.18 61.26,27.15 61.22,27.12C61.18,27.09 61.13,27.07 61.09,27.05L61.08,27.04C61.05,27.02 61.01,27.01 60.96,27L60.81,27C60.75,27 60.69,27 60.64,27.01C60.59,27.02 60.55,27.03 60.52,27.05L60.5,27.06C60.47,27.08 60.43,27.1 60.39,27.12C60.35,27.15 60.31,27.18 60.26,27.23L57.94,29.55C57.7,29.79 57.4,29.92 57.09,29.95C56.78,29.98 56.46,29.9 56.19,29.71C56.07,29.63 55.93,29.55 55.79,29.47C55.62,29.37 55.48,29.29 55.36,29.23L55.34,29.22C55.2,29.14 55.05,29.06 54.9,28.99C54.75,28.91 54.59,28.84 54.44,28.78L54.43,28.77C54.29,28.7 54.13,28.63 53.96,28.56C53.79,28.49 53.63,28.43 53.47,28.37L53.44,28.36C53.24,28.28 52.99,28.2 52.73,28.11L52.47,28C52.19,27.91 51.96,27.73 51.81,27.51C51.64,27.28 51.55,26.99 51.55,26.7L51.55,23.15C51.55,23.09 51.55,23.03 51.54,22.98L51.54,22.97C51.53,22.93 51.52,22.89 51.51,22.85C51.49,22.81 51.47,22.76 51.44,22.72C51.41,22.68 51.38,22.64 51.34,22.6C51.3,22.56 51.26,22.53 51.22,22.5C51.18,22.47 51.14,22.45 51.09,22.43C51.05,22.41 51.01,22.4 50.96,22.39C50.91,22.38 50.86,22.38 50.79,22.38L46.34,22.38C46.28,22.38 46.23,22.38 46.18,22.39C46.14,22.4 46.1,22.41 46.06,22.43L46.04,22.44C46,22.46 45.96,22.48 45.93,22.5C45.89,22.53 45.84,22.56 45.8,22.61C45.76,22.65 45.73,22.69 45.7,22.73C45.67,22.77 45.65,22.81 45.63,22.86C45.61,22.9 45.6,22.94 45.59,22.98C45.58,23.03 45.58,23.08 45.58,23.15L45.58,26.39C45.58,26.72 45.46,27.03 45.26,27.27C45.06,27.51 44.77,27.69 44.45,27.74C44.18,27.8 43.93,27.87 43.7,27.94L43.48,28C43.17,28.09 42.85,28.21 42.53,28.33L42.5,28.34C42.48,28.35 42.46,28.35 42.43,28.36C42.26,28.42 42.09,28.5 41.91,28.58C41.79,28.63 41.68,28.68 41.56,28.73C41.25,28.87 40.96,29.02 40.7,29.16C40.43,29.31 40.13,29.36 39.85,29.32C39.56,29.28 39.28,29.15 39.07,28.93C38.27,28.07 37.33,27.21 36.49,26.37C36.45,26.33 36.4,26.29 36.36,26.26L36.34,26.25C36.32,26.24 36.3,26.23 36.29,26.22C36.27,26.21 36.26,26.21 36.24,26.2C36.22,26.19 36.18,26.18 36.15,26.17C36.11,26.16 36.05,26.16 36,26.16C35.94,26.16 35.89,26.16 35.84,26.17L35.83,26.17C35.79,26.18 35.75,26.19 35.72,26.2L35.71,26.21C35.67,26.23 35.63,26.25 35.59,26.28C35.54,26.32 35.49,26.36 35.43,26.42L32.34,29.53C32.29,29.58 32.24,29.63 32.21,29.67C32.18,29.71 32.16,29.75 32.14,29.79L32.13,29.81C32.12,29.84 32.11,29.88 32.1,29.92C32.09,29.97 32.09,30.02 32.09,30.08C32.09,30.2 32.11,30.29 32.14,30.37C32.18,30.45 32.24,30.54 32.33,30.63L34.65,32.95C34.89,33.19 35.02,33.49 35.05,33.8C35.08,34.11 35,34.43 34.81,34.7C34.73,34.83 34.65,34.96 34.57,35.1C34.47,35.27 34.39,35.41 34.33,35.53L34.32,35.55C34.24,35.69 34.16,35.84 34.09,35.99C34.01,36.14 33.95,36.3 33.88,36.45L33.87,36.46C33.8,36.6 33.73,36.76 33.66,36.93C33.59,37.1 33.53,37.26 33.47,37.42L33.46,37.45C33.38,37.65 33.3,37.9 33.21,38.16L33.12,38.42C33.03,38.71 32.85,38.94 32.62,39.1C32.39,39.27 32.1,39.36 31.81,39.36L28.26,39.36C28.19,39.36 28.14,39.36 28.09,39.37C28.05,39.38 28,39.39 27.96,39.41C27.92,39.43 27.87,39.45 27.83,39.48C27.79,39.51 27.75,39.54 27.71,39.58C27.67,39.62 27.64,39.66 27.61,39.7C27.58,39.74 27.56,39.78 27.54,39.82C27.52,39.87 27.51,39.91 27.5,39.96C27.49,40.01 27.49,40.06 27.49,40.13L27.49,44.58C27.49,44.68 27.51,44.78 27.54,44.85C27.56,44.89 27.58,44.94 27.62,44.99C27.65,45.04 27.69,45.08 27.73,45.12C27.77,45.16 27.81,45.19 27.85,45.22C27.89,45.25 27.93,45.27 27.98,45.29C28.02,45.31 28.06,45.32 28.1,45.33L28.11,45.33C28.16,45.34 28.21,45.34 28.27,45.34L31.51,45.34C31.84,45.34 32.15,45.46 32.39,45.66C32.63,45.86 32.81,46.15 32.86,46.47C32.92,46.74 32.99,46.99 33.06,47.22L33.12,47.43C33.16,47.57 33.21,47.73 33.27,47.89C33.34,48.08 33.39,48.23 33.45,48.37C33.51,48.53 33.58,48.68 33.64,48.85C33.7,49.01 33.78,49.17 33.85,49.35C33.95,49.58 34.05,49.79 34.15,49.98L34.31,50.3C34.44,50.56 34.48,50.85 34.44,51.12C34.4,51.41 34.26,51.67 34.05,51.88C33.26,52.61 32.23,53.62 31.51,54.41C31.46,54.46 31.42,54.5 31.39,54.54C31.37,54.57 31.35,54.59 31.35,54.61C31.34,54.63 31.34,54.64 31.33,54.66C31.32,54.68 31.31,54.71 31.3,54.75L31.29,54.77C31.28,54.81 31.28,54.85 31.28,54.9C31.28,54.96 31.28,55.01 31.29,55.06L31.29,55.07C31.3,55.11 31.31,55.14 31.32,55.18L31.33,55.2C31.34,55.23 31.37,55.27 31.4,55.31C31.44,55.36 31.48,55.42 31.54,55.48L34.6,58.59C34.65,58.63 34.7,58.67 34.74,58.7C34.78,58.73 34.83,58.75 34.87,58.77C34.92,58.79 34.96,58.8 35.01,58.81C35.06,58.82 35.12,58.82 35.18,58.82C35.25,58.82 35.31,58.82 35.36,58.81L35.37,58.81C35.41,58.8 35.45,58.79 35.48,58.78C35.52,58.76 35.57,58.74 35.62,58.71C35.66,58.68 35.7,58.65 35.75,58.61L38.03,56.29C38.26,56.05 38.57,55.91 38.88,55.88C39.2,55.85 39.52,55.93 39.79,56.12C39.92,56.2 40.05,56.28 40.19,56.36C40.36,56.46 40.5,56.54 40.62,56.6L40.64,56.61C40.93,56.78 41.23,56.92 41.54,57.05L41.57,57.06C41.71,57.13 41.86,57.19 42.02,57.26C42.19,57.33 42.35,57.39 42.51,57.45L42.54,57.46C42.74,57.54 42.99,57.63 43.25,57.71L43.5,57.8C43.79,57.89 44.02,58.07 44.18,58.3C44.35,58.53 44.44,58.82 44.44,59.11L44.44,62.66C44.44,62.78 44.46,62.88 44.49,62.97C44.51,63.01 44.53,63.05 44.56,63.09C44.59,63.13 44.62,63.17 44.66,63.21C44.74,63.29 44.82,63.34 44.9,63.38C44.99,63.42 45.09,63.43 45.2,63.43L49.65,63.43C49.75,63.43 49.85,63.41 49.92,63.38C49.96,63.36 50.01,63.34 50.06,63.3C50.1,63.27 50.15,63.24 50.19,63.19C50.23,63.15 50.26,63.11 50.29,63.07C50.32,63.03 50.34,62.99 50.36,62.94C50.38,62.9 50.39,62.86 50.4,62.82C50.41,62.77 50.41,62.72 50.41,62.65L50.41,59.41C50.41,59.08 50.53,58.77 50.73,58.53C50.93,58.29 51.22,58.11 51.54,58.05C51.81,57.99 52.06,57.92 52.29,57.85L52.5,57.79C52.81,57.7 53.13,57.58 53.45,57.46C53.76,57.34 54.08,57.2 54.42,57.05C54.65,56.95 54.86,56.85 55.05,56.75L55.37,56.59C55.63,56.46 55.92,56.42 56.19,56.46C56.48,56.5 56.74,56.64 56.95,56.85C57.68,57.64 58.69,58.67 59.48,59.39C59.53,59.44 59.57,59.48 59.61,59.51C59.64,59.53 59.66,59.55 59.68,59.55C59.7,59.56 59.71,59.56 59.73,59.57C59.75,59.58 59.78,59.59 59.82,59.6C59.87,59.61 59.92,59.61 59.99,59.61C60.05,59.61 60.11,59.61 60.16,59.6C60.2,59.59 60.23,59.58 60.25,59.57L60.27,59.56C60.3,59.54 60.34,59.52 60.37,59.5C60.41,59.47 60.45,59.43 60.49,59.4C60.49,59.4 63.37,56.56 63.64,56.29C63.68,56.24 63.72,56.19 63.75,56.15C63.78,56.11 63.8,56.06 63.82,56.02C63.84,55.97 63.85,55.93 63.86,55.88C63.87,55.83 63.87,55.77 63.87,55.71C63.87,55.59 63.85,55.48 63.82,55.41C63.8,55.37 63.78,55.32 63.75,55.27C63.72,55.23 63.69,55.19 63.65,55.14L61.33,52.86C61.09,52.63 60.95,52.32 60.92,52.01C60.89,51.69 60.97,51.37 61.16,51.1C61.24,50.97 61.32,50.84 61.4,50.7C61.49,50.55 61.57,50.4 61.64,50.27L61.65,50.25C61.82,49.96 61.96,49.66 62.09,49.35L62.1,49.32C62.17,49.18 62.23,49.03 62.3,48.87C62.37,48.7 62.43,48.54 62.49,48.38L62.5,48.35C62.58,48.15 62.66,47.9 62.75,47.64L62.84,47.38C62.93,47.09 63.11,46.86 63.34,46.7C63.57,46.53 63.86,46.44 64.15,46.44L67.7,46.44C67.82,46.44 67.92,46.42 68.01,46.39C68.05,46.37 68.09,46.35 68.13,46.32C68.17,46.29 68.21,46.26 68.25,46.22C68.29,46.18 68.32,46.14 68.35,46.1C68.38,46.06 68.4,46.02 68.42,45.97C68.44,45.93 68.45,45.89 68.46,45.85C68.47,45.8 68.47,45.75 68.47,45.68L68.47,41.23C68.47,41.17 68.47,41.12 68.46,41.07C68.45,41.03 68.44,40.99 68.43,40.95L68.42,40.93C68.4,40.89 68.38,40.85 68.35,40.81L68.34,40.79C68.31,40.75 68.28,40.72 68.24,40.68C68.2,40.64 68.16,40.61 68.12,40.58C68.08,40.55 68.04,40.53 67.99,40.51C67.95,40.49 67.91,40.48 67.87,40.47C67.82,40.46 67.77,40.46 67.7,40.46L64.46,40.46C64.12,40.46 63.81,40.33 63.57,40.13C63.33,39.92 63.16,39.64 63.1,39.32C63.02,39.01 62.94,38.7 62.85,38.39C62.81,38.26 62.76,38.1 62.7,37.92C62.64,37.75 62.58,37.59 62.52,37.43L62.51,37.4C62.5,37.38 62.49,37.35 62.49,37.32C62.39,37.06 62.27,36.79 62.16,36.53L62.12,36.44C61.99,36.14 61.85,35.86 61.69,35.58L61.68,35.56C61.54,35.29 61.49,35 61.53,34.72C61.57,34.43 61.7,34.15 61.92,33.94C62.77,33.08 63.62,32.21 64.48,31.36C64.53,31.31 64.57,31.27 64.6,31.23L64.61,31.21C64.62,31.19 64.63,31.17 64.64,31.16C64.65,31.14 64.65,31.13 64.66,31.11C64.67,31.09 64.68,31.06 64.69,31.02C64.7,30.98 64.7,30.92 64.7,30.87C64.7,30.81 64.7,30.76 64.69,30.71L64.69,30.7C64.68,30.66 64.67,30.63 64.66,30.59L64.65,30.58C64.63,30.54 64.61,30.5 64.58,30.46C64.54,30.41 64.5,30.36 64.44,30.3L61.35,27.23ZM62.16,24.5C62.37,24.59 62.57,24.69 62.76,24.82C62.95,24.95 63.13,25.1 63.3,25.27L66.43,28.4C66.6,28.57 66.75,28.75 66.88,28.94C67.01,29.13 67.12,29.33 67.2,29.54L67.2,29.55C67.29,29.76 67.36,29.97 67.4,30.2C67.45,30.43 67.47,30.66 67.47,30.89C67.47,31.12 67.45,31.36 67.4,31.59C67.35,31.82 67.28,32.04 67.19,32.25C67.1,32.46 66.99,32.65 66.85,32.84C66.72,33.03 66.57,33.2 66.4,33.36L64.6,35.2C64.62,35.25 64.65,35.3 64.67,35.34C64.81,35.64 64.94,35.95 65.06,36.25L65.1,36.35C65.13,36.39 65.14,36.44 65.15,36.49L65.15,36.51C65.21,36.67 65.27,36.84 65.33,37.01C65.39,37.19 65.46,37.39 65.52,37.6C65.53,37.64 65.55,37.68 65.56,37.72L67.75,37.72C67.98,37.72 68.21,37.74 68.44,37.79C68.67,37.83 68.89,37.9 69.1,37.99C69.31,38.08 69.51,38.18 69.7,38.32C69.89,38.45 70.06,38.6 70.23,38.76L70.26,38.79L70.28,38.82C70.43,38.98 70.58,39.16 70.7,39.34C70.83,39.53 70.93,39.73 71.01,39.93C71.1,40.14 71.16,40.36 71.21,40.58C71.25,40.8 71.28,41.02 71.28,41.25L71.28,45.7C71.28,45.94 71.26,46.17 71.21,46.39C71.17,46.61 71.1,46.83 71.02,47.04C70.93,47.25 70.83,47.45 70.7,47.64C70.57,47.83 70.42,48.01 70.25,48.18C70.08,48.35 69.9,48.5 69.71,48.63C69.52,48.76 69.32,48.87 69.11,48.95C68.9,49.03 68.69,49.1 68.46,49.14C68.23,49.18 68,49.21 67.76,49.21L65.19,49.21C65.17,49.27 65.15,49.32 65.13,49.38C65.01,49.69 64.87,50.01 64.73,50.33C64.66,50.48 64.59,50.66 64.51,50.8C64.38,51.07 64.26,51.33 64.12,51.59L64.07,51.68C64.61,52.21 65.16,52.74 65.69,53.28C65.85,53.45 65.99,53.62 66.11,53.81C66.24,54 66.34,54.2 66.42,54.41C66.5,54.61 66.56,54.83 66.61,55.05C66.65,55.28 66.67,55.51 66.67,55.73C66.67,55.96 66.65,56.19 66.61,56.41C66.57,56.63 66.51,56.85 66.42,57.05C66.34,57.25 66.24,57.45 66.12,57.64C66.01,57.82 65.87,58 65.72,58.16C65.68,58.22 65.65,58.26 65.59,58.29L62.53,61.31C62.37,61.48 62.19,61.64 61.99,61.77C61.8,61.9 61.6,62.01 61.39,62.1L61.38,62.1C61.18,62.19 60.96,62.25 60.74,62.3C60.51,62.35 60.27,62.37 60.03,62.37C59.8,62.37 59.56,62.35 59.33,62.3C59.1,62.25 58.88,62.18 58.66,62.09C58.45,62 58.24,61.89 58.05,61.75C57.87,61.62 57.69,61.47 57.53,61.31L55.72,59.5L55.57,59.57C55.23,59.72 54.86,59.87 54.47,60.03L54.44,60.04C54.26,60.11 54.08,60.17 53.9,60.24C53.69,60.31 53.49,60.38 53.31,60.43L53.2,60.47L53.2,62.66C53.2,62.89 53.18,63.12 53.13,63.35C53.09,63.58 53.02,63.8 52.93,64.01C52.84,64.22 52.74,64.42 52.6,64.61C52.47,64.8 52.32,64.97 52.16,65.14L52.11,65.19C51.95,65.34 51.77,65.48 51.59,65.6C51.4,65.72 51.21,65.83 51.01,65.92C50.8,66.01 50.58,66.07 50.36,66.12C50.14,66.16 49.92,66.19 49.69,66.19L45.24,66.19C44.75,66.19 44.3,66.1 43.88,65.93C43.46,65.76 43.09,65.5 42.75,65.16C42.58,64.99 42.43,64.81 42.3,64.62C42.17,64.43 42.06,64.23 41.98,64.02C41.9,63.81 41.83,63.6 41.79,63.37C41.75,63.14 41.72,62.91 41.72,62.67L41.72,60.1C41.66,60.08 41.61,60.06 41.55,60.04C41.23,59.92 40.92,59.78 40.6,59.64C40.44,59.57 40.29,59.5 40.14,59.42C39.87,59.29 39.6,59.17 39.34,59.03L39.25,59C38.72,59.54 38.19,60.09 37.65,60.62C37.48,60.78 37.31,60.92 37.12,61.04C36.93,61.17 36.73,61.27 36.52,61.35C36.32,61.43 36.1,61.49 35.88,61.54C35.65,61.58 35.42,61.6 35.2,61.6C34.98,61.6 34.74,61.58 34.52,61.54C34.3,61.5 34.08,61.44 33.88,61.35C33.68,61.27 33.48,61.17 33.29,61.05L33.26,61.03C33.08,60.92 32.92,60.79 32.77,60.65C32.71,60.61 32.67,60.58 32.64,60.52L29.6,57.44C29.43,57.27 29.28,57.09 29.15,56.9C29.02,56.71 28.91,56.51 28.83,56.3L28.83,56.29C28.74,56.08 28.67,55.87 28.63,55.65C28.58,55.42 28.56,55.19 28.56,54.95C28.56,54.72 28.58,54.48 28.63,54.25C28.68,54.02 28.75,53.8 28.84,53.59C28.93,53.38 29.04,53.19 29.18,53C29.31,52.82 29.46,52.64 29.62,52.49L31.43,50.68L31.36,50.53C31.28,50.35 31.2,50.17 31.13,50L31.12,49.98C31.05,49.8 30.97,49.62 30.9,49.43L30.89,49.4C30.82,49.22 30.76,49.04 30.69,48.86C30.62,48.65 30.55,48.45 30.5,48.27C30.49,48.23 30.48,48.2 30.47,48.16L28.28,48.16C28.05,48.16 27.82,48.14 27.59,48.09C27.36,48.05 27.14,47.98 26.93,47.89C26.72,47.8 26.52,47.69 26.33,47.56C26.14,47.43 25.97,47.28 25.8,47.12L25.77,47.09C25.61,46.92 25.47,46.74 25.34,46.55C25.22,46.36 25.11,46.17 25.02,45.97C24.93,45.76 24.87,45.54 24.82,45.32C24.78,45.1 24.75,44.88 24.75,44.65L24.75,40.2C24.75,39.96 24.77,39.73 24.82,39.51C24.86,39.29 24.93,39.07 25.01,38.86C25.1,38.65 25.2,38.45 25.33,38.26C25.46,38.07 25.61,37.89 25.78,37.72C26.12,37.38 26.5,37.12 26.92,36.95C27.13,36.87 27.34,36.8 27.57,36.76C27.8,36.72 28.03,36.69 28.27,36.69L30.84,36.69C30.86,36.63 30.88,36.58 30.9,36.52C31.02,36.2 31.16,35.89 31.3,35.57C31.37,35.41 31.44,35.26 31.52,35.1C31.65,34.83 31.78,34.56 31.91,34.3L31.96,34.21L30.41,32.66C30.25,32.5 30.1,32.32 29.97,32.13C29.84,31.94 29.73,31.74 29.63,31.53C29.54,31.32 29.47,31.1 29.42,30.87C29.37,30.64 29.35,30.41 29.35,30.18C29.35,29.95 29.37,29.71 29.42,29.48C29.47,29.25 29.54,29.03 29.63,28.82C29.72,28.6 29.83,28.4 29.96,28.22C30.09,28.03 30.24,27.86 30.41,27.69C31.44,26.66 32.5,25.52 33.56,24.54C33.72,24.38 33.9,24.23 34.08,24.11C34.27,23.98 34.47,23.87 34.68,23.79L34.69,23.79C34.9,23.7 35.11,23.63 35.34,23.59C35.57,23.54 35.8,23.52 36.03,23.52C36.26,23.52 36.5,23.54 36.73,23.59C36.96,23.64 37.18,23.71 37.39,23.8C37.6,23.89 37.8,24.01 37.98,24.14L38,24.16C38.18,24.29 38.34,24.43 38.5,24.59L40.34,26.39C40.38,26.37 40.42,26.35 40.49,26.32L40.61,26.26C40.89,26.14 41.18,26.01 41.47,25.89C41.54,25.84 41.59,25.83 41.66,25.82C41.82,25.76 41.99,25.7 42.16,25.64C42.37,25.57 42.57,25.5 42.75,25.45L42.86,25.41L42.86,23.2C42.86,22.97 42.88,22.74 42.93,22.51C42.97,22.28 43.04,22.06 43.13,21.85C43.22,21.64 43.32,21.44 43.46,21.25C43.59,21.06 43.74,20.89 43.9,20.72L43.94,20.69C44.11,20.53 44.29,20.39 44.47,20.26C44.66,20.14 44.85,20.03 45.05,19.94C45.26,19.85 45.48,19.79 45.7,19.74C45.92,19.7 46.14,19.67 46.37,19.67L50.82,19.67C51.06,19.67 51.29,19.69 51.51,19.74C51.73,19.78 51.95,19.85 52.16,19.93C52.37,20.01 52.57,20.12 52.76,20.25C52.95,20.38 53.13,20.53 53.31,20.7L53.32,20.71C53.49,20.88 53.64,21.06 53.77,21.25C53.9,21.44 54.01,21.64 54.09,21.85C54.17,22.06 54.24,22.27 54.28,22.5C54.32,22.73 54.35,22.96 54.35,23.2L54.35,25.77C54.41,25.79 54.46,25.81 54.52,25.83C54.71,25.9 54.9,25.97 55.09,26.06L55.11,26.07C55.3,26.15 55.48,26.23 55.66,26.32L55.95,26.46C56.22,26.59 56.48,26.71 56.74,26.85L56.83,26.9L58.38,25.35C58.54,25.19 58.72,25.04 58.91,24.91C59.1,24.78 59.3,24.67 59.51,24.57C59.72,24.48 59.94,24.41 60.17,24.36C60.4,24.31 60.63,24.29 60.87,24.29C61.1,24.29 61.34,24.31 61.56,24.36C61.71,24.39 61.86,24.43 62.01,24.48C62.05,24.47 62.1,24.48 62.16,24.5ZM48,32.79C48.33,32.79 48.67,32.81 49.02,32.84C49.36,32.87 49.69,32.92 50.01,32.99C50.33,33.05 50.65,33.14 50.98,33.24C51.3,33.34 51.62,33.46 51.93,33.59L51.95,33.6C52.25,33.73 52.55,33.87 52.83,34.03C53.11,34.18 53.38,34.35 53.64,34.54L53.65,34.55C54.19,34.91 54.66,35.31 55.11,35.75L55.12,35.76C55.35,35.99 55.56,36.23 55.76,36.47C55.96,36.72 56.15,36.98 56.33,37.24L56.35,37.27C56.52,37.54 56.69,37.8 56.83,38.07C56.99,38.35 57.13,38.64 57.27,38.94C57.28,38.96 57.29,38.98 57.3,39C57.31,39.02 57.32,39.05 57.32,39.07C57.57,39.67 57.75,40.27 57.86,40.87C57.92,41.19 57.97,41.52 58.01,41.86C58.04,42.2 58.06,42.54 58.06,42.88C58.06,43.21 58.04,43.55 58.01,43.9C57.98,44.24 57.93,44.57 57.86,44.89C57.8,45.21 57.71,45.53 57.61,45.86C57.51,46.18 57.39,46.5 57.26,46.81L57.25,46.83C56.99,47.42 56.68,47.99 56.32,48.52L56.31,48.54C56.13,48.81 55.94,49.06 55.75,49.3C55.55,49.54 55.34,49.78 55.11,50.01L55.1,50C54.87,50.23 54.63,50.44 54.39,50.64C54.14,50.85 53.88,51.03 53.62,51.21L53.59,51.23C53.32,51.4 53.06,51.57 52.79,51.71C52.51,51.87 52.22,52.01 51.92,52.15L51.91,52.16C51.87,52.18 51.83,52.2 51.78,52.21C51.18,52.46 50.59,52.63 49.98,52.75C49.66,52.81 49.33,52.86 48.99,52.9C48.65,52.93 48.31,52.95 47.97,52.95C47.64,52.95 47.3,52.93 46.95,52.9C46.61,52.87 46.28,52.82 45.96,52.75C45.64,52.69 45.32,52.6 44.99,52.5C44.67,52.4 44.35,52.28 44.04,52.15L44.02,52.14C43.43,51.88 42.86,51.57 42.33,51.21L42.31,51.2C42.04,51.02 41.79,50.83 41.55,50.64C41.31,50.44 41.07,50.23 40.84,50L40.83,49.99C40.6,49.76 40.39,49.52 40.19,49.28C39.99,49.03 39.8,48.77 39.62,48.51L39.6,48.48C39.25,47.95 38.94,47.39 38.68,46.81L38.67,46.8C38.65,46.76 38.63,46.72 38.62,46.67C38.5,46.38 38.39,46.09 38.31,45.8C38.22,45.5 38.14,45.19 38.09,44.88C38.03,44.56 37.98,44.23 37.94,43.89C37.91,43.55 37.89,43.21 37.89,42.87C37.89,42.54 37.91,42.2 37.94,41.85C37.97,41.51 38.02,41.18 38.09,40.86C38.15,40.54 38.24,40.22 38.34,39.89C38.44,39.57 38.56,39.25 38.69,38.94L38.7,38.92C38.83,38.63 38.97,38.34 39.12,38.06C39.28,37.77 39.45,37.5 39.63,37.23L39.64,37.21C40,36.67 40.4,36.2 40.84,35.75L40.85,35.74C41.08,35.51 41.32,35.3 41.56,35.1C41.81,34.9 42.07,34.71 42.33,34.53L42.36,34.51C42.63,34.34 42.89,34.17 43.16,34.03C43.44,33.87 43.73,33.73 44.03,33.59L44.04,33.58C44.08,33.56 44.12,33.54 44.17,33.53C44.46,33.41 44.74,33.31 45.04,33.22C45.35,33.13 45.65,33.05 45.97,32.99C46.29,32.93 46.62,32.88 46.96,32.84C47.33,32.81 47.66,32.79 48,32.79ZM49.39,35.67C49.17,35.63 48.96,35.6 48.74,35.58C48.51,35.56 48.26,35.54 48,35.54C47.74,35.54 47.49,35.55 47.25,35.58C47.01,35.6 46.76,35.64 46.52,35.69C46.28,35.74 46.05,35.79 45.84,35.86C45.64,35.92 45.44,35.99 45.24,36.07C45.22,36.08 45.19,36.09 45.17,36.1L45.15,36.11C44.93,36.21 44.71,36.31 44.5,36.42L44.48,36.43C44.27,36.54 44.07,36.66 43.88,36.79L43.87,36.8C43.68,36.93 43.5,37.06 43.32,37.2C43.13,37.35 42.96,37.5 42.79,37.66C42.63,37.82 42.48,37.99 42.33,38.17L42.31,38.19C42.17,38.36 42.04,38.54 41.91,38.73L41.9,38.75C41.78,38.93 41.66,39.13 41.55,39.34C41.43,39.56 41.33,39.78 41.23,40.01L41.23,40.02C41.14,40.24 41.06,40.46 40.99,40.68C40.92,40.91 40.86,41.14 40.82,41.38C40.77,41.63 40.74,41.87 40.71,42.12C40.69,42.35 40.68,42.6 40.68,42.86C40.68,43.12 40.69,43.37 40.72,43.61C40.74,43.85 40.78,44.1 40.83,44.34C40.88,44.58 40.93,44.8 41,45.02C41.06,45.23 41.13,45.43 41.21,45.64C41.22,45.66 41.23,45.69 41.24,45.71L41.25,45.73C41.35,45.95 41.45,46.17 41.56,46.38L41.57,46.4C41.68,46.6 41.8,46.81 41.93,47L41.94,47.01C42.07,47.2 42.2,47.38 42.35,47.56C42.5,47.74 42.65,47.91 42.82,48.08C42.99,48.25 43.17,48.41 43.35,48.55C43.53,48.69 43.71,48.83 43.9,48.95L43.92,48.96C44.1,49.08 44.3,49.2 44.51,49.31C44.73,49.43 44.95,49.53 45.18,49.63L45.19,49.64C45.41,49.73 45.63,49.81 45.85,49.88C46.08,49.95 46.31,50.01 46.55,50.05C46.8,50.1 47.04,50.13 47.29,50.16C47.52,50.18 47.77,50.19 48.03,50.19C48.29,50.19 48.54,50.18 48.78,50.15C49.02,50.13 49.27,50.09 49.51,50.04C49.75,49.99 49.98,49.94 50.19,49.87C50.39,49.81 50.59,49.74 50.78,49.66C50.81,49.64 50.83,49.64 50.85,49.63L50.87,49.62C51.09,49.52 51.31,49.42 51.52,49.31L51.54,49.3C51.74,49.19 51.95,49.07 52.14,48.94L52.15,48.93C52.34,48.8 52.52,48.67 52.7,48.53C52.89,48.38 53.06,48.23 53.23,48.07C53.39,47.91 53.54,47.74 53.69,47.56L53.71,47.54C53.85,47.37 53.98,47.19 54.11,47L54.12,47C54.24,46.82 54.36,46.62 54.47,46.41C54.59,46.19 54.69,45.97 54.79,45.74L54.8,45.73C54.89,45.51 54.97,45.29 55.04,45.07C55.11,44.84 55.17,44.61 55.21,44.37C55.26,44.12 55.29,43.88 55.32,43.63C55.34,43.4 55.35,43.15 55.35,42.89C55.35,42.63 55.34,42.38 55.31,42.14C55.29,41.9 55.25,41.65 55.2,41.41C55.15,41.17 55.1,40.94 55.03,40.73C54.97,40.53 54.9,40.33 54.82,40.13C54.8,40.1 54.8,40.08 54.79,40.06L54.78,40.04C54.68,39.82 54.58,39.6 54.47,39.39L54.46,39.37C54.35,39.16 54.23,38.96 54.1,38.77L54.09,38.76C53.96,38.57 53.83,38.39 53.68,38.21C53.53,38.03 53.38,37.86 53.21,37.69C53.04,37.52 52.86,37.36 52.68,37.22C52.5,37.08 52.32,36.94 52.13,36.82L52.11,36.81C51.93,36.68 51.73,36.57 51.52,36.46C51.3,36.34 51.08,36.24 50.85,36.14L50.84,36.13C50.62,36.04 50.4,35.96 50.18,35.89C49.95,35.82 49.72,35.76 49.48,35.72C49.45,35.7 49.42,35.69 49.39,35.67ZM5.83,34.95C7.68,25.12 12.89,16.47 20.21,10.24C27.71,3.85 37.42,0 48.02,0C57.34,0 65.96,2.97 73,8.02C80.22,13.2 85.78,20.57 88.69,29.16L83.43,30.94C83.36,30.72 83.28,30.5 83.2,30.29C80.61,23.1 75.87,16.92 69.76,12.54C63.63,8.15 56.12,5.57 48.01,5.57C38.76,5.57 30.3,8.92 23.79,14.46C17.67,19.67 13.25,26.82 11.48,34.96L17.17,34.96L8.59,45.41L0,34.95L5.83,34.95Z" style="fill-rule:nonzero;"/>\n    </g>\n</svg>\n',B='\n<svg width="100%" height="100%" viewBox="0 0 52 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-miterlimit:8;">\n    <g transform="matrix(0.106257,0,0,0.106257,-17.9522,-253.275)">\n        <g>\n            <path d="M225,2514L614.764,2514" style="fill:none;stroke:black;stroke-width:13.75px;stroke-dasharray:13.75,13.75;"/>\n            <path d="M527.5,2460.5L622.5,2514.5L527.5,2568.5L527.5,2460.5Z" style="stroke:black;stroke-width:4.58px;"/>\n        </g>\n    </g>\n</svg>\n',I='\n<svg width="100%" height="100%" viewBox="0 0 52 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-miterlimit:8;">\n    <g transform="matrix(0.106401,0,0,0.106401,-132.898,-238.326)">\n        <path d="M1305,2371L1681.77,2371" style="fill:none;stroke:black;stroke-width:13.75px;stroke-dasharray:13.75,13.75;"/>\n    </g>\n</svg>\n',R='\n<svg width="100%" height="100%" viewBox="0 0 52 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-miterlimit:8;">\n    <g transform="matrix(0.102854,0,0,0.0987199,-17.2893,-175.69)">\n        <g>\n            <path d="M226,1921L615.764,1921" style="fill:none;stroke:black;stroke-width:13.75px;"/>\n        </g>\n    </g>\n</svg>\n',P='\n<svg width="100%" height="100%" viewBox="0 0 52 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-miterlimit:8;">\n    <g transform="matrix(0.103003,0,0,0.103003,-67.8231,-183.25)">\n        <path d="M716,1902L1105.76,1902" style="fill:none;stroke:black;stroke-width:13.75px;"/>\n        <path d="M716,1928L1105.76,1928" style="fill:none;stroke:black;stroke-width:13.75px;"/>\n    </g>\n</svg>\n',_='\n<svg width="100%" height="100%" viewBox="0 0 52 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-miterlimit:8;">\n    <g transform="matrix(0.102854,0,0,0.0987199,-17.2893,-175.69)">\n        <g>\n            <g transform="matrix(1,0,0,1,0,-10.1297)">\n                <path d="M226,1897L615.764,1897" style="fill:none;stroke:black;stroke-width:13.75px;"/>\n            </g>\n            <path d="M226,1921L615.764,1921" style="fill:none;stroke:black;stroke-width:13.75px;"/>\n            <g transform="matrix(1,0,0,1,0,10.1297)">\n                <path d="M226,1946L615.764,1946" style="fill:none;stroke:black;stroke-width:13.75px;"/>\n            </g>\n        </g>\n    </g>\n</svg>\n',F='\n<svg width="100%" height="100%" viewBox="0 0 52 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-miterlimit:8;">\n    <g transform="matrix(0.128005,0,0,0.124528,-448.739,-223.661)">\n        <g>\n            <g transform="matrix(0.776132,0,0,1,834.826,-2.5)">\n                <path d="M3508,1911L3897.76,1911" style="fill:none;stroke:black;stroke-width:13.75px;stroke-dasharray:13.75,13.75;"/>\n            </g>\n            <g transform="matrix(-1,0,0,1,3646.55,1859.5)">\n                <path d="M0,49C-0,21.938 21.938,-0 49,-0C76.062,-0 98,21.938 98,49C98,76.062 76.062,98 49,98C21.938,98 -0,76.062 0,49Z" style="stroke:black;stroke-width:4.58px;"/>\n            </g>\n        </g>\n    </g>\n</svg>\n',H='\n<svg width="100%" height="100%" viewBox="0 0 52 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-miterlimit:8;">\n    <g transform="matrix(-0.128005,-1.5676e-17,1.52503e-17,-0.124528,499.591,251.661)">\n        <g>\n            <g transform="matrix(0.776132,0,0,1,834.826,-2.5)">\n                <path d="M3508,1911L3897.76,1911" style="fill:none;stroke:black;stroke-width:13.75px;stroke-dasharray:13.75,13.75;"/>\n            </g>\n            <g transform="matrix(-1,0,0,1,3646.55,1859.5)">\n                <path d="M0,49C-0,21.938 21.938,-0 49,-0C76.062,-0 98,21.938 98,49C98,76.062 76.062,98 49,98C21.938,98 -0,76.062 0,49Z" style="stroke:black;stroke-width:4.58px;"/>\n            </g>\n        </g>\n    </g>\n</svg>\n',z='\n<svg width="100%" height="100%" viewBox="0 0 52 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-miterlimit:8;">\n    <g transform="matrix(0.128005,0,0,0.124528,-448.739,-223.661)">\n        <g>\n            <g transform="matrix(1,0,0,1,-40.5282,1)">\n                <path d="M3811.5,1907.5C3811.5,1880.44 3833.44,1858.5 3860.5,1858.5C3887.56,1858.5 3909.5,1880.44 3909.5,1907.5C3909.5,1934.56 3887.56,1956.5 3860.5,1956.5C3833.44,1956.5 3811.5,1934.56 3811.5,1907.5Z" style="stroke:black;stroke-width:4.58px;"/>\n            </g>\n            <g transform="matrix(0.776132,0,0,1,834.826,-2.5)">\n                <path d="M3508,1911L3897.76,1911" style="fill:none;stroke:black;stroke-width:13.75px;stroke-dasharray:13.75,13.75;"/>\n            </g>\n            <g transform="matrix(-1,0,0,1,3646.55,1859.5)">\n                <path d="M0,49C-0,21.938 21.938,-0 49,-0C76.062,-0 98,21.938 98,49C98,76.062 76.062,98 49,98C21.938,98 -0,76.062 0,49Z" style="stroke:black;stroke-width:4.58px;"/>\n            </g>\n        </g>\n    </g>\n</svg>\n',V='\n<svg width="100%" height="100%" viewBox="0 0 52 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-miterlimit:8;">\n    <g transform="matrix(0.106401,0,0,0.106401,-132.898,-238.326)">\n        <path d="M1305,2371L1681.77,2371" style="fill:none;stroke:black;stroke-width:13.75px;stroke-dasharray:13.75,13.75;"/>\n    </g>\n</svg>\n',$='\n<svg width="100%" height="100%" viewBox="0 0 52 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-miterlimit:8;">\n    <g transform="matrix(0.106401,0,0,0.106401,-132.898,-238.369)">\n        <g>\n            <g transform="matrix(1,0,0,-1,1477,2416.8)">\n                <path d="M0,0L0,90.796" style="fill:none;stroke:black;stroke-width:13.75px;"/>\n            </g>\n            <g transform="matrix(1,0,0,-1,1504.28,2416.8)">\n                <path d="M0,0L0,90.796" style="fill:none;stroke:black;stroke-width:13.75px;"/>\n            </g>\n            <path d="M1305,2371L1681.77,2371" style="fill:none;stroke:black;stroke-width:13.75px;stroke-dasharray:13.75,13.75;"/>\n        </g>\n    </g>\n</svg>\n',G='\n<svg width="100%" height="100%" viewBox="0 0 82 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n    <g transform="matrix(1.04361,0,0,1.04361,13.6151,18.1059)">\n        <text x="0px" y="0px" style="font-family:\'Arial-BoldMT\', \'Arial\', sans-serif;font-weight:700;font-size:11px;">POSITION</text>\n    </g>\n</svg>\n',X='\n<svg width="100%" height="100%" viewBox="0 0 82 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n    <g transform="matrix(1.04361,0,0,1.04361,1.82152,18.1087)">\n        <text x="0px" y="0px" style="font-family:\'Arial-BoldMT\', \'Arial\', sans-serif;font-weight:700;font-size:11px;">CARDINALITY</text>\n    </g>\n</svg>\n',Y='\n<svg width="100%" height="100%" viewBox="0 0 37 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-miterlimit:8;">\n    <g transform="matrix(0.0966357,0,0,0.096976,-23.7298,-16.1595)">\n        <g>\n            <rect x="294.5" y="204.5" width="285" height="213" style="fill:white;stroke:black;stroke-width:20.63px;"/>\n            <g transform="matrix(1,0,0,1,350.97,358)">\n                <text x="0px" y="0px" style="font-family:\'ArialMT\', \'Arial\', sans-serif;font-size:128px;">Init</text>\n            </g>\n        </g>\n    </g>\n</svg>\n',Z='\n<svg width="100%" height="100%" viewBox="0 0 37 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-miterlimit:8;">\n    <g transform="matrix(0.096976,0,0,0.096976,-73.2878,-16.1595)">\n        <g>\n            <rect x="804.5" y="204.5" width="284" height="213" style="fill:white;stroke:black;stroke-width:20.63px;"/>\n            <g transform="matrix(1,0,0,1,831.672,358)">\n                <text x="0px" y="0px" style="font-family:\'ArialMT\', \'Arial\', sans-serif;font-size:128px;">End</text>\n            </g>\n        </g>\n    </g>\n</svg>\n',D='\n<svg width="100%" height="100%" viewBox="0 0 37 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-miterlimit:8;">\n    <g transform="matrix(0.0966357,0,0,0.0966357,-23.7298,-54.9496)">\n        <g>\n            <rect x="294.5" y="606.5" width="285" height="214" style="fill:white;stroke:black;stroke-width:20.63px;"/>\n            <g transform="matrix(1,0,0,1,344.095,761)">\n                <text x="0px" y="0px" style="font-family:\'ArialMT\', \'Arial\', sans-serif;font-size:128px;">x..*</text>\n            </g>\n        </g>\n    </g>\n</svg>\n',W='\n<svg width="100%" height="100%" viewBox="0 0 37 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-miterlimit:8;">\n    <g transform="matrix(0.096976,0,0,0.0965639,-73.2878,-54.8906)">\n        <g>\n            <rect x="804.5" y="606.5" width="284" height="214" style="fill:white;stroke:black;stroke-width:20.63px;"/>\n            <g transform="matrix(1,0,0,1,842.558,761)">\n                <text x="0px" y="0px" style="font-family:\'ArialMT\', \'Arial\', sans-serif;font-size:128px;">0..x</text>\n            </g>\n        </g>\n    </g>\n</svg>\n',j='\n<svg width="100%" height="100%" viewBox="0 0 37 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-miterlimit:8;">\n    <g transform="matrix(0.0965228,0,0,0.0965228,-171.183,-54.869)">\n        <g>\n            <rect x="1822.5" y="606.5" width="285" height="214" style="fill:white;stroke:black;stroke-width:20.63px;"/>\n            <g transform="matrix(1,0,0,1,1932.58,761)">\n                <text x="0px" y="0px" style="font-family:\'ArialMT\', \'Arial\', sans-serif;font-size:128px;">x</text>\n            </g>\n        </g>\n    </g>\n</svg>\n',U='\n<svg width="100%" height="100%" viewBox="0 0 37 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-miterlimit:8;">\n    <g transform="matrix(0.0966357,0,0,0.0966357,-122.202,-54.9496)">\n        <rect x="1313.5" y="606.5" width="285" height="214" style="fill:white;stroke:black;stroke-width:20.63px;"/>\n        <g transform="matrix(1,0,0,1,1419.51,761)">\n            <text x="0px" y="0px" style="font-family:\'ArialMT\', \'Arial\', sans-serif;font-size:128px;">0</text>\n        </g>\n    </g>\n</svg>\n',J='\n<svg width="100%" height="100%" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n    <g transform="matrix(1,0,0,1,-11.0005,-14.452)">\n        <text x="21.439px" y="37.61px" style="font-family:\'Arial-BoldMT\', \'Arial\', sans-serif;font-weight:700;font-size:20px;">1</text>\n    </g>\n</svg>\n',K='\n<svg width="100%" height="100%" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n    <g transform="matrix(1,0,0,1,-11.0005,-14.452)">\n        <text x="21.439px" y="37.61px" style="font-family:\'Arial-BoldMT\', \'Arial\', sans-serif;font-weight:700;font-size:20px;">2</text>\n    </g>\n</svg>\n',q='\n<svg width="100%" height="100%" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n    <g transform="matrix(1,0,0,1,-11.0005,-14.452)">\n        <text x="21.439px" y="37.61px" style="font-family:\'Arial-BoldMT\', \'Arial\', sans-serif;font-weight:700;font-size:20px;">3</text>\n    </g>\n</svg>\n',Q='\n<svg width="100%" height="100%" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n    <g transform="matrix(0.260421,0,0,0.260421,0,0)">\n        <path d="M17.995,17.995C29.992,5.999 45.716,0 61.439,0C77.162,0 92.887,5.999 104.884,17.995C116.88,29.992 122.878,45.716 122.878,61.439C122.878,77.164 116.88,92.887 104.884,104.884C92.887,116.88 77.162,122.879 61.439,122.879C45.716,122.879 29.991,116.88 17.995,104.884C5.998,92.888 0,77.164 0,61.439C0,45.716 5.998,29.992 17.995,17.995ZM57.656,31.182C57.656,29.342 59.148,27.85 60.989,27.85C62.83,27.85 64.322,29.342 64.322,31.182L64.322,58.565L91.705,58.565C93.545,58.565 95.037,60.057 95.037,61.897C95.037,63.738 93.545,65.23 91.705,65.23L64.321,65.23L64.321,92.613C64.321,94.453 62.829,95.945 60.988,95.945C59.147,95.945 57.655,94.453 57.655,92.613L57.655,65.229L30.273,65.229C28.433,65.229 26.94,63.737 26.94,61.896C26.94,60.056 28.432,58.564 30.273,58.564L57.656,58.564L57.656,31.182ZM61.439,6.665C47.421,6.665 33.404,12.013 22.708,22.709C12.013,33.404 6.665,47.422 6.665,61.439C6.665,75.457 12.013,89.475 22.708,100.17C33.404,110.866 47.421,116.214 61.439,116.214C75.457,116.214 89.474,110.866 100.17,100.17C110.865,89.475 116.214,75.456 116.214,61.439C116.214,47.422 110.865,33.404 100.17,22.709C89.475,12.013 75.457,6.665 61.439,6.665Z" style="fill-rule:nonzero;"/>\n    </g>\n</svg>\n',tt='\n<svg width="100%" height="100%" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n    <g transform="matrix(0.260332,0,0,0.260332,-0.00147934,-4.51125e-05)">\n        <path d="M61.44,0L61.458,-0C95.174,-0 122.918,27.744 122.918,61.46C122.918,95.176 95.174,122.92 61.458,122.92C27.742,122.92 -0.002,95.176 -0.002,61.46C-0.002,45.165 6.478,29.522 18,18C29.501,6.46 45.147,-0.023 61.44,-0ZM50.776,48.767L50.856,48.767L57.756,41.947L57.686,65.597L57.686,65.627C57.686,67.448 59.185,68.947 61.006,68.947C62.816,68.947 64.31,67.467 64.326,65.657L64.386,41.817L71.216,48.587C71.808,49.067 72.546,49.329 73.308,49.329C75.129,49.329 76.628,47.83 76.628,46.009C76.628,45.22 76.347,44.457 75.836,43.857L63.426,31.597C62.146,30.333 60.057,30.333 58.776,31.597L46.216,44.037C45.739,44.626 45.478,45.362 45.478,46.12C45.478,47.936 46.972,49.43 48.788,49.43C49.505,49.43 50.203,49.197 50.776,48.767ZM35,81.19L35,68.19C35.016,66.38 36.51,64.9 38.32,64.9C40.141,64.9 41.64,66.399 41.64,68.22L41.64,77.7L81.14,77.7L81.14,68.19C81.156,66.38 82.65,64.9 84.46,64.9C86.281,64.9 87.78,66.399 87.78,68.22L87.78,81.16C87.701,82.913 86.245,84.316 84.49,84.33L38.34,84.33C36.577,84.343 35.096,82.95 35,81.19ZM99.44,23.44C89.366,13.366 75.687,7.7 61.44,7.7C31.959,7.7 7.7,31.959 7.7,61.44C7.7,90.921 31.959,115.18 61.44,115.18C90.921,115.18 115.18,90.921 115.18,61.44C115.198,47.189 109.529,33.504 99.44,23.44Z" style="fill-rule:nonzero;"/>\n    </g>\n</svg>\n',et='\n<svg width="100%" height="100%" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n    <g transform="matrix(0.260352,0,0,0.260352,-0.00179881,-4.47344e-05)">\n        <path d="M61.44,0C61.446,-0 61.452,-0 61.458,-0C95.174,-0 122.918,27.744 122.918,61.46C122.918,95.176 95.174,122.92 61.458,122.92C27.742,122.92 -0.002,95.176 -0.002,61.46C-0.002,45.165 6.478,29.522 18,18C29.501,6.46 45.147,-0.023 61.44,-0ZM71.44,50.74C72.013,50.309 72.711,50.076 73.428,50.076C75.244,50.076 76.738,51.571 76.738,53.386C76.738,54.145 76.477,54.881 76,55.47L63.44,67.91C62.159,69.174 60.071,69.174 58.79,67.91L46.38,55.65C45.869,55.05 45.588,54.287 45.588,53.498C45.588,51.677 47.087,50.178 48.908,50.178C49.67,50.178 50.409,50.44 51,50.92L57.83,57.69L57.89,33.85C57.906,32.04 59.4,30.56 61.21,30.56C63.031,30.56 64.53,32.059 64.53,33.88C64.53,33.89 64.53,33.9 64.53,33.91L64.46,57.56L71.36,50.74L71.44,50.74ZM35,81.19L35,68.19C35.016,66.38 36.51,64.9 38.32,64.9C40.141,64.9 41.64,66.399 41.64,68.22C41.64,68.23 41.64,68.24 41.64,68.25L41.64,77.7L81.14,77.7L81.14,68.19C81.156,66.38 82.65,64.9 84.46,64.9C86.281,64.9 87.78,66.399 87.78,68.22C87.78,68.23 87.78,68.24 87.78,68.25L87.78,81.16C87.701,82.913 86.245,84.316 84.49,84.33L38.34,84.33C36.577,84.343 35.096,82.95 35,81.19ZM99.44,23.44C89.366,13.366 75.687,7.7 61.44,7.7C31.959,7.7 7.7,31.959 7.7,61.44C7.7,90.921 31.959,115.18 61.44,115.18C90.921,115.18 115.18,90.921 115.18,61.44C115.198,47.189 109.529,33.504 99.44,23.44Z" style="fill-rule:nonzero;"/>\n    </g>\n</svg>\n',it='\n<svg width="100%" height="100%" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n    <g transform="matrix(1,0,0,1,-11.0005,-0.982802)">\n        <text x="12.015px" y="22.326px" style="font-family:\'Arial-BoldMT\', \'Arial\', sans-serif;font-weight:700;font-size:11px;">JSON</text>\n    </g>\n</svg>\n',st='\n<svg width="100%" height="100%" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n    <g transform="matrix(1,0,0,1,-11.0005,-0.982802)">\n        <text x="16.605px" y="22.326px" style="font-family:\'Arial-BoldMT\', \'Arial\', sans-serif;font-weight:700;font-size:11px;">TXT</text>\n    </g>\n</svg>\n',nt='\n<svg width="100%" height="100%" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n    <g transform="matrix(1,0,0,1,-11.0005,-0.982802)">\n        <text x="16.605px" y="22.326px" style="font-family:\'Arial-BoldMT\', \'Arial\', sans-serif;font-weight:700;font-size:11px;">CSV</text>\n    </g>\n</svg>\n',ot='\n<svg width="100%" height="100%" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n    <g transform="matrix(1,0,0,1,-11.0005,-0.982802)">\n        <text x="12.015px" y="22.326px" style="font-family:\'Arial-BoldMT\', \'Arial\', sans-serif;font-weight:700;font-size:11px;">JSON</text>\n    </g>\n</svg>\n',rt='\n<svg width="100%" height="100%" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n    <g transform="matrix(1,0,0,1,-11.0005,-0.982802)">\n        <text x="15.377px" y="22.326px" style="font-family:\'Arial-BoldMT\', \'Arial\', sans-serif;font-weight:700;font-size:11px;">SVG</text>\n    </g>\n</svg>\n',at='\n<svg width="100%" height="100%" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n    <g transform="matrix(1,0,0,1,-11.0005,-0.982802)">\n        <text x="16.605px" y="22.326px" style="font-family:\'Arial-BoldMT\', \'Arial\', sans-serif;font-weight:700;font-size:11px;">TXT</text>\n    </g>\n</svg>\n',lt='\n<svg width="100%" height="100%" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n    <g transform="matrix(0.260415,0,0,0.260415,0,0)">\n        <path d="M44.541,97.197L44.541,86.404C44.541,84.759 45.874,83.427 47.519,83.427L48.957,83.427L48.957,65.344L47.256,65.344C45.611,65.344 44.277,64.01 44.277,62.365L44.277,50.885C44.277,49.24 45.611,47.907 47.256,47.907L68.431,47.907C70.449,47.907 71.969,48.762 72.996,50.465C73.731,51.686 74.099,53.314 74.099,55.345L74.099,83.427L75.625,83.427C77.27,83.427 78.604,84.759 78.604,86.404L78.604,97.197C78.604,98.842 77.27,100.176 75.625,100.176L47.519,100.176C45.874,100.176 44.541,98.842 44.541,97.197ZM61.44,5.956C57.599,5.956 53.875,6.317 50.271,7.039C46.661,7.761 43.181,8.838 39.832,10.268L39.834,10.272C36.422,11.739 33.249,13.453 30.319,15.419C27.381,17.39 24.658,19.629 22.154,22.143L22.142,22.154C19.629,24.658 17.39,27.381 15.418,30.319C13.452,33.249 11.738,36.423 10.271,39.834C10.25,39.882 10.229,39.929 10.206,39.976C8.806,43.28 7.75,46.713 7.038,50.271C6.317,53.875 5.956,57.599 5.956,61.439C5.956,65.281 6.317,69.003 7.038,72.609C7.761,76.218 8.837,79.699 10.267,83.047L10.271,83.047C11.738,86.457 13.453,89.631 15.418,92.561C17.389,95.499 19.628,98.223 22.142,100.727L22.153,100.739L22.153,100.737C24.657,103.251 27.38,105.491 30.318,107.462C33.248,109.429 36.422,111.142 39.833,112.608C39.881,112.629 39.928,112.651 39.974,112.674C43.279,114.072 46.711,115.129 50.27,115.842C53.874,116.563 57.598,116.924 61.439,116.924C65.28,116.924 69.003,116.563 72.608,115.842C76.217,115.119 79.698,114.043 83.046,112.613L83.044,112.607C86.456,111.14 89.63,109.427 92.56,107.461C95.498,105.49 98.22,103.25 100.724,100.736L100.737,100.726L100.736,100.726C103.25,98.222 105.489,95.497 107.46,92.56C109.426,89.63 111.141,86.456 112.607,83.046C112.628,82.997 112.65,82.95 112.672,82.903C114.071,79.598 115.128,76.167 115.84,72.608C116.562,69.003 116.923,65.28 116.923,61.438C116.923,57.598 116.562,53.874 115.84,50.27C115.117,46.66 114.041,43.18 112.611,39.832L112.607,39.833C111.14,36.421 109.425,33.248 107.46,30.318C105.489,27.38 103.25,24.657 100.736,22.153L100.725,22.141L100.724,22.141C98.22,19.627 95.497,17.389 92.56,15.417C89.63,13.451 86.456,11.736 83.044,10.27C82.996,10.249 82.949,10.227 82.903,10.205C79.598,8.806 76.166,7.749 72.607,7.037C69.005,6.317 65.281,5.956 61.44,5.956ZM49.108,1.199C53.1,0.4 57.212,0 61.44,0C65.668,0 69.78,0.4 73.772,1.199C77.699,1.985 81.52,3.166 85.233,4.74C85.288,4.76 85.341,4.782 85.396,4.804C89.096,6.396 92.587,8.287 95.865,10.487C99.132,12.679 102.156,15.165 104.931,17.949C107.715,20.724 110.201,23.749 112.393,27.016C114.592,30.292 116.484,33.784 118.076,37.484L118.071,37.486L118.076,37.496C119.682,41.256 120.885,45.127 121.681,49.108C122.48,53.1 122.879,57.212 122.879,61.44C122.879,65.669 122.48,69.782 121.681,73.772C120.895,77.7 119.714,81.52 118.14,85.233C118.12,85.288 118.099,85.342 118.076,85.397C116.484,89.096 114.593,92.588 112.393,95.866C110.201,99.132 107.715,102.157 104.931,104.932C102.156,107.715 99.131,110.202 95.865,112.393C92.588,114.592 89.096,116.485 85.396,118.077L85.394,118.073L85.383,118.077C81.623,119.682 77.752,120.886 73.772,121.682C69.78,122.481 65.668,122.881 61.44,122.881C57.212,122.881 53.1,122.481 49.108,121.682C45.181,120.895 41.359,119.715 37.647,118.141C37.592,118.121 37.538,118.1 37.484,118.077C33.783,116.485 30.292,114.593 27.015,112.393C23.748,110.202 20.724,107.715 17.949,104.932C15.165,102.157 12.679,99.131 10.487,95.866C8.288,92.589 6.396,89.096 4.804,85.397L4.808,85.395L4.804,85.385C3.197,81.625 1.995,77.752 1.199,73.772C0.4,69.781 0,65.668 0,61.439C0,57.211 0.4,53.099 1.199,49.107C1.985,45.18 3.165,41.359 4.74,37.647C4.76,37.592 4.781,37.538 4.804,37.483C6.396,33.783 8.287,30.291 10.487,27.015C12.679,23.748 15.165,20.723 17.949,17.948C20.724,15.164 23.748,12.678 27.015,10.486C30.292,8.287 33.783,6.395 37.484,4.803L37.486,4.807L37.496,4.803C41.256,3.197 45.128,1.995 49.108,1.199ZM50.497,89.328L50.497,94.219L72.646,94.219L72.646,89.328C72.155,89.248 71.673,89.076 71.202,88.814C70.704,88.541 70.235,88.179 69.79,87.736C69.351,87.297 68.989,86.82 68.709,86.306C68.334,85.62 68.143,84.921 68.143,84.212L68.143,55.346C68.143,54.687 68.103,54.193 68.023,53.864L50.234,53.864L50.234,59.407C50.833,59.466 51.415,59.658 51.977,59.981L51.972,59.99L51.977,59.993C52.4,60.237 52.809,60.557 53.201,60.953C53.266,61.013 53.331,61.076 53.392,61.143C53.818,61.608 54.154,62.071 54.393,62.532C54.738,63.194 54.914,63.87 54.914,64.559L54.914,84.213C54.914,84.832 54.774,85.44 54.5,86.035C54.468,86.113 54.432,86.191 54.392,86.267C54.146,86.74 53.804,87.205 53.37,87.665C52.929,88.134 52.463,88.509 51.969,88.79C51.488,89.064 50.999,89.244 50.497,89.328ZM61.484,44.549C59.853,44.549 58.343,44.304 56.951,43.814C55.51,43.305 54.229,42.541 53.107,41.518C53.054,41.471 53.004,41.421 52.956,41.371C51.871,40.357 51.053,39.187 50.499,37.863C49.928,36.498 49.645,35.003 49.645,33.383C49.645,31.767 49.928,30.264 50.5,28.882C51.085,27.466 51.953,26.228 53.107,25.174L53.167,25.121C54.265,24.121 55.522,23.367 56.939,22.857C58.346,22.35 59.861,22.098 61.484,22.098C63.146,22.098 64.678,22.347 66.083,22.845C67.536,23.361 68.824,24.137 69.947,25.174L69.948,25.173C71.102,26.227 71.97,27.465 72.556,28.881C73.127,30.263 73.41,31.766 73.41,33.382C73.41,35.003 73.128,36.498 72.556,37.863C71.976,39.249 71.107,40.467 69.943,41.513L69.948,41.518C68.828,42.539 67.536,43.304 66.071,43.814C64.66,44.305 63.132,44.549 61.484,44.549ZM58.929,38.207C59.66,38.465 60.512,38.594 61.485,38.594C62.499,38.594 63.377,38.466 64.118,38.207C64.806,37.968 65.416,37.606 65.947,37.122L65.952,37.127L65.971,37.11C66.46,36.672 66.825,36.163 67.068,35.584C67.328,34.962 67.457,34.228 67.457,33.383C67.457,32.518 67.328,31.769 67.067,31.138C66.827,30.556 66.454,30.033 65.948,29.571L65.95,29.57L65.925,29.548C65.403,29.063 64.797,28.697 64.108,28.453C63.36,28.187 62.486,28.055 61.487,28.055C60.508,28.055 59.659,28.184 58.943,28.442C58.294,28.675 57.708,29.029 57.186,29.502C57.162,29.526 57.138,29.549 57.112,29.572C56.606,30.034 56.234,30.557 55.993,31.139C55.733,31.769 55.603,32.519 55.603,33.383C55.603,34.227 55.732,34.962 55.992,35.583C56.215,36.116 56.541,36.589 56.972,37.002C57.019,37.04 57.066,37.08 57.111,37.121C57.64,37.604 58.246,37.966 58.929,38.207Z" style="fill-rule:nonzero;"/>\n    </g>\n</svg>\n',ht='\n<svg width="100%" height="100%" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n    <g transform="matrix(0.262937,0,0,0.260419,0,0)">\n        <path d="M49.85,34.584C49.85,32.503 51.537,30.816 53.618,30.816C55.699,30.816 57.386,32.503 57.386,34.584L57.386,49.849L72.651,49.849C74.732,49.849 76.419,51.536 76.419,53.617C76.419,55.698 74.732,57.385 72.651,57.385L57.385,57.385L57.385,72.649C57.385,74.731 55.698,76.417 53.617,76.417C51.536,76.417 49.849,74.731 49.849,72.649L49.849,57.384L34.584,57.384C32.503,57.384 30.816,55.697 30.816,53.616C30.816,51.535 32.503,49.848 34.584,49.848L49.85,49.848L49.85,34.584ZM98.496,82.963L121.702,108.254L105.701,122.879L83.322,98.258C74.819,103.928 64.604,107.235 53.617,107.235C38.811,107.235 25.407,101.233 15.704,91.53C6.001,81.827 0,68.422 0,53.617C0,38.811 6.002,25.407 15.705,15.704C25.407,6.001 38.812,0 53.617,0C68.422,0 81.827,6.001 91.53,15.704C101.232,25.407 107.234,38.811 107.234,53.617C107.234,64.449 104.021,74.531 98.496,82.963ZM87.3,19.934C78.68,11.314 66.772,5.983 53.617,5.983C40.463,5.983 28.554,11.315 19.934,19.934C11.314,28.554 5.983,40.463 5.983,53.617C5.983,66.772 11.315,78.68 19.934,87.299C28.554,95.92 40.462,101.25 53.617,101.25C66.772,101.25 78.68,95.92 87.3,87.299C95.92,78.68 101.252,66.772 101.252,53.617C101.252,40.463 95.92,28.554 87.3,19.934Z" style="fill-rule:nonzero;"/>\n    </g>\n</svg>\n',dt='\n<svg width="100%" height="100%" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n    <g transform="matrix(0.262939,0,0,0.260415,0,0)">\n        <path d="M34.584,57.385C32.503,57.385 30.816,55.698 30.816,53.617C30.816,51.536 32.503,49.849 34.584,49.849L72.648,49.849C74.73,49.849 76.416,51.536 76.416,53.617C76.416,55.698 74.73,57.385 72.648,57.385L34.584,57.385ZM98.496,82.963L121.701,108.254L105.701,122.881L83.322,98.258C74.818,103.928 64.603,107.235 53.617,107.235C38.811,107.235 25.407,101.233 15.704,91.53C6.001,81.828 0,68.424 0,53.617C0,38.811 6.001,25.407 15.705,15.704C25.407,6.001 38.812,0 53.617,0C68.424,0 81.826,6.001 91.529,15.705C101.232,25.407 107.234,38.812 107.234,53.618C107.234,64.449 104.021,74.531 98.496,82.963ZM87.299,19.935C78.68,11.315 66.771,5.983 53.617,5.983C40.463,5.983 28.554,11.315 19.934,19.935C11.314,28.555 5.982,40.463 5.982,53.618C5.982,66.773 11.314,78.681 19.934,87.302C28.554,95.921 40.463,101.253 53.617,101.253C66.771,101.253 78.68,95.921 87.299,87.302C95.92,78.681 101.252,66.773 101.252,53.618C101.252,40.463 95.92,28.554 87.299,19.935Z" style="fill-rule:nonzero;"/>\n    </g>\n</svg>\n',ct='\n<svg width="100%" height="100%" viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">\n    <g transform="matrix(8.86039e-17,-1.44701,1.36287,8.34517e-17,-5.32884,29.0842)">\n        <path d="M12.498,7.085L20.1,16.877L4.896,16.877L12.498,7.085Z" style="fill:rgb(190,190,190);"/>\n    </g>\n</svg>\n';function ut(t,e){t.enableSelection(),e.selectedActivities.add(t);var i=Array.from(e.editor.activities).find((e=>e.getAttribute("elem_id")===t.id));e.editor.addLineSelection(i),e.mouseAttachment=null,e.existenceConstraintSubmenu.close(),e.relationConstraintSubmenu.close()}function Ct(t,e){t.disableSelection(),e.selectedActivities.delete(t);var i=Array.from(e.editor.activities).find((e=>e.getAttribute("elem_id")===t.id));e.editor.removeLineSelection(i)}function pt(t,e){t.enableSelection(),e.selectedExistenceConstraints.add(t);var i=Array.from(e.editor.constraints).find((e=>e.getAttribute("elem_id")===t.id));e.editor.addLineSelection(i),e.relationConstraintSubmenu.close(),1===e.selectedExistenceConstraints.size&&0===e.selectedRelationConstraints.size&&0===e.selectedActivities.size?(e.mouseAttachment=t,e.existenceConstraintSubmenu.setOptions(t),e.existenceConstraintSubmenu.open()):(e.mouseAttachment=null,e.existenceConstraintSubmenu.close())}function mt(t,e){t.disableSelection(),e.selectedExistenceConstraints.delete(t);var i=Array.from(e.editor.constraints).find((e=>e.getAttribute("elem_id")===t.id));e.editor.removeLineSelection(i),e.mouseAttachment=null,e.existenceConstraintSubmenu.close()}function gt(t,e){t.enableSelection(),e.selectedRelationConstraints.add(t);var i=Array.from(e.editor.constraints).find((e=>e.getAttribute("elem_id")===t.id));e.editor.addLineSelection(i),e.existenceConstraintSubmenu.close(),0===e.selectedExistenceConstraints.size&&1===e.selectedRelationConstraints.size&&0===e.selectedActivities.size?(e.mouseAttachment=t,e.relationConstraintSubmenu.setOptions(t),e.relationConstraintSubmenu.open()):(e.mouseAttachment=null,e.relationConstraintSubmenu.close())}function wt(t,e){t.disableSelection(),e.selectedRelationConstraints.delete(t);var i=Array.from(e.editor.constraints).find((e=>e.getAttribute("elem_id")===t.id));e.editor.removeLineSelection(i),e.mouseAttachment=null,e.relationConstraintSubmenu.close()}function vt(t){for(const e of t.selectedActivities)Ct(e,t);for(const e of t.selectedExistenceConstraints)mt(e,t);for(const e of t.selectedRelationConstraints)wt(e,t)}class ft{constructor(t){this.declare=t,this.activities=new Set,this.constraints=new Set,this.highlightedLines=new Set,this.selectedLines=new Set,this.faceplates=new Set,this.inUse=!1,this.resize=!1,this.offset,this.width=350,this.minWidth=180,this.menuContainer=document.createElement("div"),this.declare.container.appendChild(this.menuContainer),this.menuContainer.style.width=this.width+"px",this.menuContainer.style.height="100vh",this.menuContainer.style.position="absolute",this.menuContainer.style.right="0px",this.menuContainer.style.top="0",this.menuContainer.style.backgroundColor="F8F8F8",this.menuContainer.style.borderLeft="solid 5px",this.menuContainer.style.borderColor="#BEBEBE",this.menuContainer.style.transition="right 0.5s",this.addResizeEvent(),this.collapseButton=document.createElement("div"),this.menuContainer.appendChild(this.collapseButton),this.collapseButton.style.position="absolute",this.collapseButton.style.right=this.width+4+"px",this.collapseButton.style.top="calc(50vh - 25px)",this.collapseButton.style.height="50px",this.collapseButton.style.width="20px",this.collapseButton.style.backgroundColor="F8F8F8",this.collapseButton.style.border="solid 1px",this.collapseButton.style.borderColor="#BEBEBE",this.collapseButton.style.borderRadius="4px 0 0 4px",this.collapseButtonIcon=document.createElement("div"),this.collapseButton.appendChild(this.collapseButtonIcon),this.collapseButtonIcon.innerHTML=ct,this.collapseButtonIcon.style.transform="rotate(180deg)",this.collapseButtonIcon.style.transition="transform 0.5s",this.addCollapseEvent(),this.activitiesContainer=this.createSubcontainer(this.menuContainer,"Activities","20vh",!0),this.faceplates.add(this.createFaceplate(this.menuContainer,"20vh")),this.constraintsContainer=this.createSubcontainer(this.menuContainer,"Constraints","calc(50vh - 16px)",!0),this.faceplates.add(this.createFaceplate(this.menuContainer,"70vh + 32px")),this.descriptionContainer=this.createSubcontainer(this.menuContainer,"Description","calc(20vh - 32px)",!1),this.descriptionContainer.innerHTML="Select a constraint to generate a textual description.",this.descriptionContainer.style.padding="8px 1px 20px 12px",this.descriptionContainer.style.fontStyle="italic",this.descriptionContainer.style.whiteSpace="normal",this.addActivitySelectionEvent(this.activitiesContainer),this.addConstraintSelectionEvent(this.constraintsContainer),this.addActivity("<br>"),this.addConstraint("<br>"),function(t,e){t.activitiesContainer.addEventListener("mouseover",(i=>{h(t,e);var s=i.target.closest(".editorLine");s&&(t.highlightLine(s),function(t,e){var i=e.declareModel.getActivity(t.innerHTML);if(i){let t,s=i.getConstraints();for(const i of s)t=Array.from(e.editor.constraints).find((t=>t.innerHTML===i.toString())),e.editor.highlightLine(t),i.enableHighlight();i.enableHighlight()}}(s,e))}))}(this,this.declare),function(t,e){t.constraintsContainer.addEventListener("mouseover",(i=>{h(t,e);var s=i.target.closest(".editorLine");s&&(t.highlightLine(s),function(t,e){var i=e.declareModel.getExistenceConstraint(t.innerHTML);if(i||(i=e.declareModel.getRelationConstraint(t.innerHTML)),i){let t,s=i.getActivities();for(const i of s)t=Array.from(e.editor.activities).find((t=>t.innerHTML===i.toString())),i.enableHighlight();i.enableHighlight()}}(s,e))}))}(this,this.declare),function(t,e){let i=[t.constraintsContainer,t.activitiesContainer];for(const s of i)s.addEventListener("mouseleave",(()=>{h(t,e)}))}(this,this.declare),function(t,e){t.activitiesContainer.addEventListener("input",(t=>{console.log(t.inputType);var i=window.getSelection();switch(e.editor.inUse=!0,t.inputType){case"insertParagraph":i.anchorNode.removeAttribute("elem_id");break;case"deleteContentBackward":case"deleteContentForward":case"insertText":!function(t,e,i){let s=t.firstChild.wholeText;if(s){var n=t.getAttribute("elem_id");n?e.declareModel.getActivityById(n).updateLabel(s,e.editor):function(t,e){let i=t.firstChild.wholeText,s=e.declareModel.addActivity(i);t.setAttribute("elem_id",s),t.innerHTML=i,e.editor.activities.add(t);for(const t of e.declareModel.activities)t.id!==s&&(t.enablePhysics=!1);e.declareModel.autoLayout=!0,d(e.declareModel),setTimeout((()=>{e.declareModel.autoLayout=!1,e.declareModel.alignActivities();for(const t of e.declareModel.activities)t.lockIcon||(t.enablePhysics=!0)}),6e3)}(t,e)}else{i.preventDefault();for(const t of e.editor.activities)"<br>"===t.innerHTML&&t.getAttribute("elem_id")&&e.declareModel.deleteActivity(t.getAttribute("elem_id"))}}(i.anchorNode.parentElement,e,t)}e.editor.inUse=!1}))}(this,this.declare),function(t,e){t.constraintsContainer.addEventListener("input",(t=>{var i=window.getSelection();switch(e.editor.inUse=!0,t.inputType){case"insertParagraph":i.anchorNode.removeAttribute("elem_id");break;case"deleteContentBackward":case"deleteContentForward":case"insertText":c(i.anchorNode.parentElement,e),u(i.anchorNode.parentElement,e);break;case"insertFromPaste":u(i.anchorNode.parentElement,e);break;case"deleteByCut":c(i.anchorNode.parentElement,e)}e.editor.inUse=!1}))}(this,this.declare)}addActivity(t){if(!this.inUse){0===this.activities.size&&(this.activitiesContainer.innerHTML="");let e=this.createLine(t);t.id&&this.activities.add(e),this.activitiesContainer.appendChild(e)}}updateActivity(t){let e=Array.from(this.activities).find((e=>e.getAttribute("elem_id")===t.id));t.toString()?e.innerHTML=t.toString():this.declare.declareModel.deleteActivity(e.getAttribute("elem_id"))}addConstraint(t){if(!this.inUse){0===this.constraints.size&&(this.constraintsContainer.innerHTML="");let e=this.createLine(t);t.id&&this.constraints.add(e),this.constraintsContainer.appendChild(e)}}updateConstraint(t){Array.from(this.constraints).find((e=>e.getAttribute("elem_id")===t.id)).innerHTML=t.toString()}removeActivity(t){let e=Array.from(this.activities).find((e=>e.getAttribute("elem_id")===t.id));e&&(this.activities.delete(e),this.selectedLines.has(e)&&this.selectedLines.delete(e),e.remove()),0===this.activities.size&&this.addActivity("<br>")}removeConstraint(t){let e=Array.from(this.constraints).find((e=>e.getAttribute("elem_id")===t.id));e&&(this.constraints.delete(e),this.selectedLines.has(e)&&this.selectedLines.delete(e),e.remove()),0===this.constraints.size&&this.addConstraint("<br>"),this.updateDescription()}createSubcontainer(t,e,i,s){let n=document.createElement("div");n.style.fontFamily="Arial, sans-serif",n.style.padding="2px 12px",n.style.fontWeight="bold",n.style.border="none",n.style.borderBottom="none",n.style.borderLeft="none",n.style.borderRight="none",n.style.backgroundColor="rgb(150, 150, 150)",n.style.fontSize="13px",n.style.userSelect="none",n.innerHTML=e,t.appendChild(n);let o=document.createElement("div");if(o.classList.add("editorContainer"),o.style.padding="8px 1px 20px 4px",o.style.fontFamily="Arial",o.style.fontSize="12px",o.style.overflow="auto",o.style.height=i,o.style.whiteSpace="nowrap",o.contentEditable=!1,o.style.outline="0px solid transparent",o.setAttribute("spellcheck","false"),t.appendChild(o),s){let t=document.createElement("div");n.appendChild(t),t.style.float="right",t.innerHTML="edit off",t.style.cursor="pointer",t.style.borderColor="rgb(150, 150, 150)",t.style.borderWidth="1px 4px",t.style.borderRadius="3px",t.style.marginTop="-1px",t.style.borderStyle="solid",t.addEventListener("click",(e=>{"true"===o.contentEditable?(o.contentEditable=!1,t.style.backgroundColor="",t.style.borderColor="rgb(150, 150, 150)",t.innerHTML="edit off"):(o.contentEditable=!0,t.style.backgroundColor="rgb(248, 248, 248)",t.style.borderColor="rgb(248, 248, 248)",t.innerHTML="edit on")}));let i=document.createElement("div");n.appendChild(i),i.style.float="right",i.innerHTML="&#9660;",i.style.cursor="pointer",i.style.borderColor="rgb(150, 150, 150)",i.style.borderWidth="1px 4px",i.style.borderRadius="3px",i.style.marginTop="-1px",i.style.borderStyle="solid",i.style.userSelect="none",i.addEventListener("click",(()=>{this.sort(e)}))}return o}createFaceplate(t,e){let i=document.createElement("div");return i.style.height="16px",i.style.width=this.width-16,i.style.right="16px",i.style.position="absolute",i.style.top="calc("+e+" + 32px)",i.style.backgroundImage="linear-gradient(transparent, rgb(248, 248, 248))",t.appendChild(i),i}createLine(t){var e=document.createElement("div");return e.innerHTML=t.toString(),e.setAttribute("elem_id",t.id),e.classList.add("editorLine"),e.style.padding="0px 8px",e.style.margin="1px",e.style.height="16px",e.style.borderRadius="2px",e}highlightLine(t){t&&(this.highlightedLines.add(t),t.style.background="#d3d3d3")}removeLineHighlight(t){t&&(this.highlightedLines.delete(t),t.style.background="transparent")}addLineSelection(t){if(t){var e=document.createElement("div");t.appendChild(e),e.classList.add("marker"),e.style.height="18px",e.style.width="4px",e.style.background="#BD86E6",e.style.position="relative",e.style.left="-8px",e.style.top="-16px",this.selectedLines.add(t),this.updateDescription()}}removeLineSelection(t){if(t){var e=t.querySelector(".marker");e&&e.remove(),this.selectedLines.delete(t),this.updateDescription()}}updateDescription(){if(1===this.selectedLines.size&&this.constraints.has(this.selectedLines.values().next().value)){this.descriptionContainer.style.fontStyle="unset";let t=this.declare.declareModel.getExistenceConstraintById(this.selectedLines.values().next().value.getAttribute("elem_id"));t||(t=this.declare.declareModel.getRelationConstraintById(this.selectedLines.values().next().value.getAttribute("elem_id"))),this.descriptionContainer.innerHTML=function(t){if(t instanceof L){let e=t.activityA;const i={AtLeast:"at least",AtMost:"at most",Exactly:"exactly"},s={One:"once",Two:"twice",Three:"three times"};let n="",o="";for(let e in i)if(t.template.startsWith(e)){n=i[e],o=s[t.template.replace(e,"")];break}switch(t.template){case"Init":return`Each trace must start with '${e}'.`;case"End":return`Each trace must end with '${e}'.`;case"Absence":return`Each trace must not contain '${e}'.`;case"AtLeastOne":case"AtLeastTwo":case"AtLeastThree":case"AtMostOne":case"AtMostTwo":case"AtMostThree":case"ExactlyOne":case"ExactlyTwo":case"ExactlyThree":return`Each trace must contain '${e}' ${n} ${o} .`;default:console.log("Error: "+t)}}else if(t instanceof E){let e=t.activityA,i=t.activityB,s="",n=t.template;switch(t.isNegation&&n.startsWith("Not")&&(s="never ",n=n.substring(3)),n){case"RespondedExistence":return`If '${e}' occurs, '${i}' must also occur somewhere.`;case"NotRespondedExistence":return`If '${e}' occurs, '${i}' must not occur anywhere.`;case"Response":return`If '${e}' occurs, it must ${s}eventually be followed by '${i}'.`;case"AlternateResponse":return`If '${e}' occurs, it must ${s}eventually be followed by '${i}', with no other '${e}' in between.`;case"ChainResponse":return`If '${e}' occurs, it must ${s}immediately be followed by '${i}'.`;case"Precedence":return`If '${e}' occurs, it must ${s}eventually be preceded by '${i}'.`;case"AlternatePrecedence":return`If '${e}' occurs, it must ${s}eventually be preceded by '${i}', with no other '${e}' in between.`;case"ChainPrecedence":return`If '${e}' occurs, it must ${s}immediately be preceded by '${i}'.`;case"CoExistence":return`If '${e}' occurs, '${i}' must also occur somewhere. If '${i}' occurs, '${e}' must also occur somewhere.`;case"NotCoExistence":return`If '${e}' occurs, '${i}' must not occur anywhere. If '${i}' occurs, '${e}' must also not occur anywhere.`;case"Succession":return`If '${e}' occurs, it must ${s}eventually be followed by '${i}' and if '${i}' occurs, it must ${s}eventually be preceded by '${e}'.`;case"AlternateSuccession":return`If '${e}' occurs, it must ${s}eventually be followed by '${i}', with no other '${e}' in between and if '${i}' occurs, it must ${s}eventually be preceded by '${e}', with no other '${i}' in between.`;case"ChainSuccession":return`If '${e}' occurs, it must ${s}immediately be followed by '${i}' and if '${i}' occurs, it must ${s}immediately be preceded by '${e}'.`;default:console.log("Error: "+t)}}}(t)}else this.descriptionContainer.innerHTML="Select a constraint to generate a textual description.",this.descriptionContainer.style.fontStyle="italic"}addCollapseEvent(){this.collapseButton.addEventListener("click",(()=>{"0px"===this.menuContainer.style.right?this.close():this.open()})),this.collapseButton.addEventListener("mouseover",(()=>{this.collapseButton.style.backgroundColor="rgb(220, 220, 220)"})),this.collapseButton.addEventListener("mouseleave",(()=>{this.collapseButton.style.backgroundColor="#F8F8F8"}))}close(){this.menuContainer.style.right=-(this.width+4)+"px",this.collapseButtonIcon.style.transform="rotate(0)",this.declare.helpMenu.menuContainer.style.right="20px",this.declare.navigationMenu.menuContainer.style.right="20px"}open(){this.menuContainer.style.right="0",this.declare.helpMenu.menuContainer.style.right=this.width+24+"px",this.collapseButtonIcon.style.transform="rotate(180deg)",this.declare.navigationMenu.menuContainer.style.right=this.width+24+"px"}addResizeEvent(){this.resizeHandle=document.createElement("div"),this.menuContainer.appendChild(this.resizeHandle),this.resizeHandle.style.width="16px",this.resizeHandle.style.height="100vh",this.resizeHandle.style.position="absolute",this.resizeHandle.style.right=this.width-7+"px",this.resizeHandle.style.top="0",this.resizeHandle.style.transition="right 0.5s",this.resizeHandle.style.cursor="col-resize",this.resizeHandle.addEventListener("mousedown",(t=>{this.resize=!0,this.offset=g(t,this.declare.canvas).x+this.width})),document.addEventListener("mousemove",(t=>{if(this.resize){this.width=this.offset-g(t,this.declare.canvas).x,this.width<this.minWidth&&(this.width=this.minWidth),this.menuContainer.style.width=this.width+"px",this.resizeHandle.style.right=this.width-4+"px",this.collapseButton.style.right=this.width+4+"px";for(const t of this.faceplates)t.style.width=this.width-16;this.declare.helpMenu.menuContainer.style.right=this.width+24+"px",this.declare.helpMenu.menuContainer.style.transition="right 0s",this.declare.navigationMenu.menuContainer.style.right=this.width+24+"px",this.declare.navigationMenu.menuContainer.style.transition="right 0s",this.menuContainer.style.userSelect="none"}})),document.addEventListener("mouseup",(t=>{this.resize=!1,this.declare.helpMenu.menuContainer.style.transition="right 0.5s",this.declare.navigationMenu.menuContainer.style.transition="right 0.5s",this.menuContainer.style.userSelect="unset"}))}addActivitySelectionEvent(t){t.addEventListener("click",(e=>{if("false"===t.contentEditable){let t=e.target.getAttribute("elem_id");!function(t,e,i){t.shiftKey||vt(i);var s=i.declareModel.getActivityById(e);s&&ut(s,i)}(e,t,this.declare)}}))}addConstraintSelectionEvent(t){t.addEventListener("click",(e=>{if("false"===t.contentEditable){let t=e.target.getAttribute("elem_id");!function(t,e,i){t.shiftKey||vt(i);var s=i.declareModel.getExistenceConstraintById(e);if(s)pt(s,i);else{var n=i.declareModel.getRelationConstraintById(e);n&&gt(n,i)}}(e,t,this.declare)}}))}sort(t){if("Activities"===t){this.activitiesContainer.innerHTML="";let t=Array.from(this.activities).sort(((t,e)=>t.firstChild.wholeText.localeCompare(e.firstChild.wholeText)));this.activities=new Set(t);for(const t of this.activities)console.log(t.firstChild.wholeText),this.activitiesContainer.appendChild(t)}else{this.constraints.clear(),this.constraintsContainer.innerHTML="";for(const t of this.declare.declareModel.existenceConstraintMap)for(const e of t[1])this.addConstraint(e);this.addConstraint("<br>");for(const t of this.declare.declareModel.relationConstraintMap)for(const e of t[1])this.addConstraint(e)}}}class yt{constructor(t,e,i,s){this.declare=t,this.orientation=s[0],this.verticalPlacement=s[1],this.horizontalPlacement=s[2],this.menuContainer,this.buttons=new Set,this.activeButton,this.menuContainer=document.createElement("div"),this.declare.container.appendChild(this.menuContainer),"v"===this.orientation?this.menuContainer.style.width="50px":this.menuContainer.style.heigth="50px",this.menuContainer.style.position="absolute","t"===this.verticalPlacement?this.menuContainer.style.top="20px":this.menuContainer.style.bottom="20px","l"===this.horizontalPlacement?this.menuContainer.style.left="20px":this.menuContainer.style.right="374px",this.menuContainer.style.backgroundColor="F8F8F8",this.menuContainer.style.border="solid 1px",this.menuContainer.style.borderColor="#BEBEBE",this.menuContainer.style.borderRadius="4px",this.menuContainer.style.transition="right 0.5s";for(const t of e)this.buttons.add(new xt(this,t));null!==i&&(this.input=new xt(this,i+"_SUBMIT"),this.input=new bt(this,i))}setActive(t){this.resetActive();let e=Array.from(this.buttons).find((({action:e})=>e===t));e.setActive(),this.activeButton=e}resetActive(){this.activeButton&&(this.activeButton.setInactive(),this.activeButton=null)}}class xt{constructor(t,i){this.menu=t,this.element=document.createElement("button"),this.action=i,this.menu.menuContainer.appendChild(this.element),this.element.classList.add("menuButton"),this.element.style.backgroundColor="F8F8F8",this.element.style.width="50px",this.element.style.height="50px",this.element.style.border="none",this.element.style.cursor="pointer",this.element.setAttribute("data-action",this.action),this.element.innerHTML=e[this.action]}setActive(){this.element.style.backgroundColor="rgb(200, 200, 200)"}setInactive(){this.element.style.backgroundColor="F8F8F8"}}class bt{constructor(t,e){this.menu=t,this.inputElement=document.createElement("input"),this.inputElement.setAttribute("id",e),this.inputElement.style.width="200px",this.inputElement.style.margin="5px",this.inputElement.style.height="30px",this.inputElement.style.position="relative",this.inputElement.style.top="5px",this.menu.menuContainer.appendChild(this.inputElement)}}class At{constructor(t,e,i){this.declare=t,this.buttons=new Set,this.isOpen=!1,this.width="200px",this.menuContainer=document.createElement("div"),this.declare.container.appendChild(this.menuContainer),this.menuContainer.style.position="absolute",this.menuContainer.style.bottom="71px",this.menuContainer.style.width="50px",this.menuContainer.style.height="0px",this.menuContainer.style.left=e,this.menuContainer.style.backgroundColor="F8F8F8",this.menuContainer.style.border="solid 1px",this.menuContainer.style.borderColor="#BEBEBE",this.menuContainer.style.borderRadius="4px 4px 0px 0px",this.menuContainer.style.transition="height 0.5s",this.menuContainer.style.visibility="hidden",this.menuContainer.style.overflow="hidden";for(const t of i)this.buttons.add(new xt(this,t))}open(){this.menuContainer.style.visibility="unset",this.menuContainer.style.height=50*this.buttons.size+"px",this.isOpen=!0}close(){this.menuContainer.style.height="0px",this.isOpen=!1,setTimeout((()=>{this.menuContainer.style.visibility="hidden"}),500)}}class Lt{constructor(t){this.declare=t,this.segments=new Set,this.top,this.left,this.width="200px",this.menuContainer=document.createElement("div"),this.declare.container.appendChild(this.menuContainer),this.menuContainer.style.position="absolute",this.menuContainer.style.left="71px",this.menuContainer.style.width="0px",this.menuContainer.style.backgroundColor="F8F8F8",this.menuContainer.style.border="solid 1px",this.menuContainer.style.borderColor="#BEBEBE",this.menuContainer.style.borderRadius="0px 4px 4px 4px",this.menuContainer.style.transition="width 0.5s",this.menuContainer.style.visibility="hidden",this.menuContainer.style.overflow="hidden",this.menuContainer.style.whiteSpace="nowrap",this.heading=document.createElement("div"),this.menuContainer.appendChild(this.heading),this.heading.style.width="100%",this.heading.style.height="10px",this.heading.style.padding="7px 0",this.heading.style.backgroundColor="rgb(200, 200, 200)",this.heading.style.textAlign="center",this.heading.style.fontFamily="Arial, sans-serif",this.heading.style.fontSize="12px",this.heading.style.fontWeight="bold",this.subheading=document.createElement("div"),this.menuContainer.appendChild(this.subheading),this.subheading.style.width="100%",this.subheading.style.height="10px",this.subheading.style.padding="7px 0",this.subheading.style.backgroundColor="rgb(200, 200, 200)",this.subheading.style.textAlign="center",this.subheading.style.fontFamily="Arial, sans-serif",this.subheading.style.fontSize="9px",this.subheading.style.fontStyle="italic",this.subheading.innerHTML="(Hover over buttons for additional information.)"}open(){this.menuContainer.style.visibility="unset",this.menuContainer.style.width="200px"}close(){this.menuContainer.style.width="0px",setTimeout((()=>{"200px"!==this.menuContainer.style.width&&(this.menuContainer.style.visibility="hidden")}),500)}getSelectedOptions(){let t=new Map;for(const e of this.segments)t.set(e.name,e.buttonGroup.getSelection());return t}displayAllOptions(){for(const t of this.segments)t.display(),t.buttonGroup.displayButtons()}getSegment(t){return Array.from(this.segments).find((({name:e})=>e===t))}}class Et extends Lt{constructor(t){super(t),this.menuContainer.style.top="121px",this.heading.innerHTML="Edit Existence Constraint",this.segments.add(new Mt(this,"Category",["POSITION","CARDINALITY"])),this.segments.add(new Mt(this,"Position",["INIT","END"])),this.segments.add(new Mt(this,"Cardinality Type",["AT_LEAST","EXACTLY","AT_MOST","ABSENCE"])),this.segments.add(new Mt(this,"Cardinality",["ONE","TWO","THREE"])),this.hideOptions()}hideOptions(){this.displayAllOptions();let t=this.getSelectedOptions();"POSITION"===t.get("Category")&&(this.getSegment("Cardinality Type").hide(),this.getSegment("Cardinality").hide()),"CARDINALITY"===t.get("Category")&&this.getSegment("Position").hide(),"ABSENCE"===t.get("Cardinality Type")&&this.getSegment("Cardinality").hide()}getTemplate(){let t=this.getSelectedOptions();if("POSITION"===t.get("Category"))return"INIT"===t.get("Position")?"Init":"END"===t.get("Position")?"End":void 0;if("CARDINALITY"==t.get("Category")){if("ABSENCE"===t.get("Cardinality Type"))return"Absence";const e={ONE:"One",TWO:"Two",THREE:"Three"};return{AT_LEAST:"AtLeast",EXACTLY:"Exactly",AT_MOST:"AtMost"}[t.get("Cardinality Type")]+e[t.get("Cardinality")]}}setOptions(t){var e=this.getSegment("Category");"Init"===t.template||"End"===t.template?(e.buttonGroup.selectSetting("POSITION"),e=this.getSegment("Position"),"Init"===t.template?e.buttonGroup.selectSetting("INIT"):e.buttonGroup.selectSetting("END")):(e.buttonGroup.selectSetting("CARDINALITY"),e=this.getSegment("Cardinality Type"),"Absence"===t.template?e.buttonGroup.selectSetting("ABSENCE"):(t.template.startsWith("AtLeast")?e.buttonGroup.selectSetting("AT_LEAST"):t.template.startsWith("Exactly")?e.buttonGroup.selectSetting("EXACTLY"):e.buttonGroup.selectSetting("AT_MOST"),e=this.getSegment("Cardinality"),t.template.endsWith("One")?e.buttonGroup.selectSetting("ONE"):t.template.endsWith("Two")?e.buttonGroup.selectSetting("TWO"):e.buttonGroup.selectSetting("THREE"))),this.hideOptions()}close(){super.close(),setTimeout((()=>{this.heading.innerHTML="Edit Existence Constraint"}),500)}}class Tt extends Lt{constructor(t){super(t),this.menuContainer.style.top="171px",this.heading.innerHTML="Edit Relation Constraint",this.segments.add(new Mt(this,"Order",["ARROW","NO_ARROW"])),this.segments.add(new Mt(this,"Prefix",["ONE_LINE","TWO_LINES","THREE_LINES"])),this.segments.add(new Mt(this,"Activation",["A","B","BOTH"])),this.segments.add(new Mt(this,"Negation",["NO_NEGATION","NEGATION"])),this.hideOptions()}hideOptions(){this.displayAllOptions();let t=this.getSelectedOptions();if("NO_ARROW"===t.get("Order")){let t=this.getSegment("Prefix");t.hide(),t.buttonGroup.selectSetting("ONE_LINE")}if("ONE_LINE"!==t.get("Prefix")){let t=this.getSegment("Order");t.hide(),t.buttonGroup.selectSetting("ARROW")}if("TWO_LINES"===t.get("Prefix")){let t=this.getSegment("Negation");t.hide(),t.buttonGroup.selectSetting("NO_NEGATION")}if("NEGATION"===t.get("Negation")){let e=this.getSegment("Prefix");e.buttonGroup.hideButton("TWO_LINES"),"TWO_LINES"===t.get("Prefix")&&e.buttonGroup.selectSetting("ONE_LINE")}}getTemplate(){let t=this.getSelectedOptions();if("NO_ARROW"===t.get("Order"))return"BOTH"===t.get("Activation")?"NO_NEGATION"===t.get("Negation")?"CoExistence":"NotCoExistence":"A"!==t.get("Activation")&&"B"!==t.get("Activation")||"NEGATION"!==t.get("Negation")?"RespondedExistence":"NotRespondedExistence";const e={TWO_LINES:"Alternate",THREE_LINES:"Chain"}[t.get("Prefix")]||"",i="NEGATION"===t.get("Negation")?"Not":"",s={A:"Response",B:"Precedence",BOTH:"Succession"}[t.get("Activation")]||"";return"Not"!==i||"Alternate"!==e?i+e+s:void 0}setOptions(t){let e=this.getSegment("Order");t.directed?e.buttonGroup.selectSetting("ARROW"):e.buttonGroup.selectSetting("NO_ARROW"),e=this.getSegment("Prefix"),1===t.pathCount?e.buttonGroup.selectSetting("ONE_LINE"):2===t.pathCount?e.buttonGroup.selectSetting("TWO_LINES"):e.buttonGroup.selectSetting("THREE_LINES"),e=this.getSegment("Activation"),t.activationA?t.activationB?e.buttonGroup.selectSetting("BOTH"):e.buttonGroup.selectSetting("A"):e.buttonGroup.selectSetting("B"),e=this.getSegment("Negation"),t.negation?e.buttonGroup.selectSetting("NEGATION"):e.buttonGroup.selectSetting("NO_NEGATION"),this.hideOptions()}close(){super.close(),setTimeout((()=>{this.heading.innerHTML="Edit Relation Constraint"}),500)}}class Mt{constructor(t,e,i){this.submenu=t,this.name=e,this.heading=document.createElement("div"),this.submenu.menuContainer.appendChild(this.heading),this.heading.style.width="100%",this.heading.style.height="10px",this.heading.style.padding="4px 8px 8px 8px",this.heading.style.whiteSpace="nowrap",this.heading.style.overflow="hidden",this.heading.style.fontSize="11px",this.heading.style.fontFamily="Arial, sans-serif",this.heading.innerHTML=this.name,this.heading.style.display="block",this.buttonGroup=new kt(this,i),this.buttonGroup.buttonGroup.style.display="flex"}hide(){for(const t of this.buttonGroup.buttons)t.style.opacity=.3}display(){for(const t of this.buttonGroup.buttons)t.style.opacity=1}}class kt{constructor(t,i){this.segment=t,this.selectedButton,this.buttons=new Set,this.buttonGroup=document.createElement("div"),this.segment.submenu.menuContainer.appendChild(this.buttonGroup),this.buttonGroup.style.heigth="30px",this.buttonGroup.style.width="calc(100% - 20px)",this.buttonGroup.style.margin="0px 10px 10px 10px",this.buttonGroup.style.position="relative",this.buttonGroup.style.backgroundColor="F8F8F8",this.buttonGroup.style.border="solid 1px",this.buttonGroup.style.borderColor="#BEBEBE",this.buttonGroup.style.borderRadius="4px";for(const t of i){const i={AT_MOST:"AtMost",AT_LEAST:"AtLeast",EXACTLY:"Exactly",ABSENCE:"Absence",ONE_LINE:"(none)",TWO_LINES:"Alternate",THREE_LINES:"Chain",A:"activated by first activity",B:"activated by second activity",BOTH:"activated by both activities",ARROW:"directed",NO_ARROW:"undirected",NEGATION:"Not",NO_NEGATION:"(no negation)",POSITION:"Position in a trace.",CARDINALITY:"Number of occurrences in a trace.",INIT:"First element in a trace.",END:"Last element in a trace."};let s=document.createElement("button");this.buttons.add(s),this.buttonGroup.appendChild(s),s.classList.add("subMenuButton"),s.style.flexGrow="1",s.style.flexBasis="0",s.style.backgroundColor="F8F8F8",s.style.height="30px",s.style.border="none",s.style.cursor="pointer",s.setAttribute("data-option",t),s.title=i[t]||"",s.innerHTML=e[t]}this.selectSetting(i[0]),this.buttonGroup.addEventListener("click",(t=>{let e=t.target.closest(".subMenuButton").getAttribute("data-option");this.selectSetting(e),this.segment.submenu.hideOptions(),this.segment.submenu.declare.mouseAttachment&&this.segment.submenu.declare.mouseAttachment.updateTemplate(this.segment.submenu.getTemplate(),this.segment.submenu.declare.view.shape)}))}getButton(t){return Array.from(this.buttons).find((e=>e.getAttribute("data-option")===t))}selectSetting(t){let e=this.getButton(t);"0.3"!==e.style.opacity&&(this.selectedButton&&(this.selectedButton.style.backgroundColor="F8F8F8"),this.selectedButton=e,this.selectedButton.style.backgroundColor="rgb(200, 200, 200)")}getSelection(){return this.selectedButton.getAttribute("data-option")}hideButton(t){this.getButton(t).style.opacity=.3}displayButtons(){for(const t of this.buttons)t.style.opacity=1}}class St{constructor(t,e){this.declare=t,this.buttons=new Set,this.menuContainer=document.createElement("div"),this.declare.container.appendChild(this.menuContainer),this.menuContainer.style.position="absolute",this.menuContainer.style.backgroundColor="F8F8F8",this.menuContainer.style.border="solid 1px",this.menuContainer.style.borderColor="#BEBEBE",this.menuContainer.style.borderRadius="4px",this.menuContainer.style.display="none";for(const t of e)this.buttons.add(new Nt(this,t));this.menuContainer.style.width="150px"}open(t){if(this.declare.enableEdit){this.menuContainer.style.display="unset";let e=g(t,this.declare.canvas);this.menuContainer.style.top=e.y,this.menuContainer.style.left=e.x}}close(){this.menuContainer.style.display="none"}}class Nt{constructor(t,e){this.contextMenu=t,this.action=e,this.element=document.createElement("button"),this.contextMenu.menuContainer.appendChild(this.element),this.element.innerHTML=e.charAt(0)+e.substring(1).toLowerCase(),this.element.style.width="150px",this.element.style.height="25px",this.element.style.border="none",this.element.style.backgroundColor="none",this.element.style.cursor="pointer",this.element.setAttribute("data-action",this.action)}}function Ot(t,e,i){if(i&&!i.isView){e.selectedActivities.has(i.selectedActivity)||i.selectedActivity.alignToGrid();for(const t of e.selectedActivities)t.alignToGrid()}e.mode="MOVE"}function Bt(t,e){e.mouseAttachment.destroy(),e.mouseAttachment=null,e.relationConstraintSubmenu.close(),e.mode="MOVE",e.editMenu.setActive("MOVE")}function It(t){var e=null;t.canvas.addEventListener("click",(e=>{switch(t.mode){case"MOVE":t.enableEdit&&function(t,e){if(t.shiftKey||0!==t.button||vt(e),s=t.target.closest("[draggable=true]").getAttribute("id")){var i=e.declareModel.getActivityById(s);if(i)ut(i,e);else{var s=t.target.parentElement.parentElement.getAttribute("id"),n=e.declareModel.getExistenceConstraintById(s);if(n)pt(n,e);else{s=t.target.parentElement.getAttribute("id");var o=e.declareModel.getRelationConstraintById(s);o?gt(o,e):vt(e)}}}}(e,t);break;case"ACTIVITY_PLACEMENT":!function(t,e){var i=e.mouseAttachment;e.mouseAttachment=null,i.destroy(),(i=e.declareModel.createActivity()).setPosition(w(t,e)),i.alignToGrid(),i.enableEditMode(e.editor),e.mode="MOVE",e.editMenu.setActive("MOVE")}(e,t);break;case"EXISTENCE_CONSTRAINT_PLACEMENT":!function(t,e){var i=t.target.closest("[draggable=true]").getAttribute("id");if(i){var s=e.declareModel.getActivityById(i),n=e.mouseAttachment;n.activityA=s,e.declareModel.addConstraint(n.toString()),e.mouseAttachment=null,n.destroy(),e.existenceConstraintSubmenu.close(),e.mode="MOVE",e.editMenu.setActive("MOVE")}}(e,t);break;case"SELECT_RELATION_CONSTRAINT_START":!function(t,e){e.declareModel.autoLayout=!1;var i=t.target.closest("[draggable=true]");if(i){var s=i.getAttribute("id");if(s.startsWith("activity-group")){var n=e.declareModel.getActivityById(s),o=e.relationConstraintSubmenu.getTemplate(),r=new E(n,null,o);e.mouseAttachment=r,r.addPathToView(e.view.shape),n.addToView(e.view.shape);for(const t of n.relationConstraints)t.addArrowsAndCirclesToView(e.view.shape);r.addArrowsAndCirclesToView(e.view.shape),r.setPositionManually(w(t,e)),e.mode="SELECT_RELATION_CONSTRAINT_END"}}}(e,t);break;case"SELECT_RELATION_CONSTRAINT_END":!function(t,e){e.declareModel.removeHighlights();var i=t.target.closest("[draggable=true]");if(i){var s=i.getAttribute("id");if(s.startsWith("activity-group")&&s!==e.mouseAttachment.activityA.id){e.mouseAttachment.activityB=e.declareModel.getActivityById(s);var n=e.mouseAttachment.toString();e.mouseAttachment.destroy(),e.mouseAttachment=null,e.declareModel.addConstraint(n),e.relationConstraintSubmenu.close(),e.mode="MOVE",e.editMenu.setActive("MOVE")}else Bt(0,e)}}(e,t)}})),t.canvas.addEventListener("dblclick",(e=>{"MOVE"===t.mode&&function(t,e){var i=t.target.closest("[draggable=true]");if(i){var s=i.getAttribute("id");if(s){var n=e.declareModel.getActivityById(s);n&&n.enableEditMode(e.editor)}}}(e,t)})),t.canvas.addEventListener("mousedown",(i=>{"MOVE"===t.mode&&(e=function(t,e){var i,s,n,o,r=t.target.closest("[draggable=true]");if(r&&(i=r.getAttribute("id")),e.view.id===i||null===r)s=!0,n=e.view,o=g(t,e.canvas),e.mode="DRAG";else{if(e.declareModel.autoLayout=!1,s=!1,o=w(t,e),n=e.declareModel.getActivityById(i),!t.shiftKey&&1===e.selectedActivities.size){for(const t of e.selectedActivities){t.disableSelection();var a=Array.from(e.editor.activities).find((e=>e.getAttribute("elem_id")===t.id));e.editor.removeLineSelection(a)}e.selectedActivities.clear()}e.mode="DRAG"}return{isView:s,offset:o,selectedActivity:n}}(i,t)),t.contextMenu.close()})),t.canvas.addEventListener("mousemove",(i=>{switch(t.mode){case"DRAG":!function(t,e,i){if(i){t.preventDefault();var s=i.isView?g(t,e.canvas):w(t,e);if(i.isView)e.view.setPosition({x:e.view.posX-(i.offset.x-s.x),y:e.view.posY-(i.offset.y-s.y)});else{e.selectedActivities.has(i.selectedActivity)||i.selectedActivity.setPosition({x:i.selectedActivity.posX-(i.offset.x-s.x),y:i.selectedActivity.posY-(i.offset.y-s.y)});for(const t of e.selectedActivities)t.setPosition({x:t.posX-(i.offset.x-s.x),y:t.posY-(i.offset.y-s.y)})}i.offset=s}}(i,t,e);break;case"ACTIVITY_PLACEMENT":!function(t,e){var i=w(t,e),s=e.mouseAttachment;i.x-=s.width/2,i.y-=s.height/2,e.mouseAttachment.setPosition(i)}(i,t);break;case"EXISTENCE_CONSTRAINT_PLACEMENT":!function(t,e){e.declareModel.autoLayout=!1;var i=w(t,e),s=e.mouseAttachment;i.x-=s.width/2,i.y-=s.height/2+13,e.mouseAttachment.setPosition(i)}(i,t);break;case"SELECT_RELATION_CONSTRAINT_END":!function(t,e){var i=w(t,e),s=e.mouseAttachment;i.x>s.activityA.posX?i.x-=8:i.x+=8,i.y>s.activityA.posy?i.y+=8:i.y-=8,s.setPositionManually(i),e.declareModel.removeHighlights();var n=t.target.closest("[draggable=true]");if(n){var o=n.getAttribute("id");if(o.startsWith("activity-group")&&o!==s.activityA.id){var r=e.declareModel.getActivityById(o);r&&(e.declareModel.getRelationConstraint(s.template+"('"+s.activityA.toString()+"','"+r.toString()+"')")||r.enableHighlight())}}}(i,t);break;default:!function(t,e){if(function(t){for(const e of t.editor.highlightedLines)t.editor.removeLineHighlight(e);t.declareModel.removeHighlights()}(e),(s=t.target.closest("[draggable=true]").getAttribute("id"))&&"0px"===e.editor.menuContainer.style.right){var i=e.declareModel.getActivityById(s);if(i)!function(t,e){e.enableHighlight();var i=Array.from(t.editor.activities).find((t=>t.getAttribute("elem_id")===e.id));t.editor.highlightLine(i)}(e,i);else{var s=t.target.parentElement.parentElement.getAttribute("id"),n=e.declareModel.getExistenceConstraintById(s);if(n)!function(t,e){e.enableHighlight();var i=Array.from(t.editor.constraints).find((t=>t.getAttribute("elem_id")===e.id));t.editor.highlightLine(i)}(e,n);else{s=t.target.parentElement.getAttribute("id");var o=e.declareModel.getRelationConstraintById(s);o&&function(t,e){e.enableHighlight();var i=Array.from(t.editor.constraints).find((t=>t.getAttribute("elem_id")===e.id));t.editor.highlightLine(i)}(e,o)}}}}(i,t)}})),t.canvas.addEventListener("mouseup",(i=>{"DRAG"===t.mode&&(Ot(0,t,e),e=null)})),t.canvas.addEventListener("mouseleave",(i=>{"MOVE"===t.mode&&(Ot(0,t,e),e=null)})),document.addEventListener("keydown",(e=>{if("Escape"===e.key)switch(t.mode){case"ACTIVITY_PLACEMENT":!function(t,e){e.mouseAttachment.destroy(),e.mouseAttachment=null,e.mode="MOVE",e.editMenu.setActive("MOVE")}(0,t);break;case"EXISTENCE_CONSTRAINT_PLACEMENT":!function(t,e){e.mouseAttachment.destroy(),e.mouseAttachment=null,e.existenceConstraintSubmenu.close(),e.mode="MOVE",e.editMenu.setActive("MOVE")}(0,t);break;case"SELECT_RELATION_CONSTRAINT_START":case"SELECT_RELATION_CONSTRAINT_END":Bt(0,t)}if("Delete"===e.key){for(const e of t.selectedExistenceConstraints)t.declareModel.deleteExistenceConstraint(e.id,!0);for(const e of t.selectedRelationConstraints)t.declareModel.deleteRelationConstraint(e.id,!0);for(const e of t.selectedActivities)t.declareModel.deleteActivity(e.id)}})),t.canvas.addEventListener("contextmenu",(e=>{t.contextMenu.close(),e.preventDefault(),t.contextMenu.open(e)})),t.fileInput.onchange=()=>{var e=new FileReader;e.onload=function(){let i=e.result.split(/[;\r\n]+/);for(const e of i)t.declareModel.stringToConstraint(e);t.declareModel.addToView(t.view.shape)},e.readAsText(t.fileInput.files[0])}}class Rt{constructor(t){this.background=document.createElement("div"),t.appendChild(this.background),this.background.style.width="100%",this.background.style.height="100vh",this.background.style.position="absolute",this.background.style.top="0px",this.background.style.backgroundColor="rgba(0,0,0,0.5)",this.elem=document.createElement("div"),this.background.appendChild(this.elem),this.elem.style.position="absolute",this.elem.style.top="10vh",this.elem.style.left="20%",this.elem.style.width="50%",this.elem.style.maxWidth="60%",this.elem.style.maxHeight="80vh",this.elem.style.borderRadius="5px",this.elem.style.backgroundColor="F8F8F8",this.elem.style.border="solid 1px",this.elem.style.borderColor="#BEBEBE",this.elem.style.overflow="hidden",this.body=document.createElement("div"),this.elem.appendChild(this.body),this.body.style.width="calc(100% - 30px)",this.body.style.maxHeight="calc(80vh - 80px)",this.body.style.padding="15px",this.body.style.fontFamily="Tahoma, sans-serif",this.body.style.overflowY="auto",this.background.addEventListener("click",(t=>{t.target===this.background&&this.close()}))}open(){this.background.style.display="unset"}close(){this.background.style.display="none"}}class Pt extends Rt{constructor(t){super(t),this.body.innerHTML='\n\n        <h3>Import & Export</h3>\n        Import: JSON, CSV, TXT<br>\n        Export: JSON, SVG, TXT\n\n        <h3>Visual Editor</h3>\n        <b>Activities</b> (rounded rectangles) can be placed anywhere on the canvas.<br>\n        <b>Existence constraints</b> (small rectangles) must be defined first by choosing a category (position or cardinality) and then selecting the desired value. Afterward, they can be attached to any activity.<br>\n        <b>Relation Constraints</b> can be added and edited using the arrow button. Here, properties can be defined to represent specific templates, a list of all supported templates is shown below.<br>\n        <br>\n        The <b>edit menu</b> on the left also allows to <b>delete</b> and <b>auto-position</b> elements. \n        The <b>context menu</b> can be opened by right-clicking on elements and also allows deleting, as well as locking and unlocking elements, to enable auto-positioning of all unlocked activities. \n\n        <h3>Textual Editor</h3>\n        The textual editor contains three sections:<br>\n        <b>Activities</b> & <b>Constraints</b> can be added and changed when the edit mode is turned on. Newly created constraints are automatically added to the visual model as soon as they are valid, until then they are displayed in red.<br>\n        A <b>textual description</b> is available when a single visual or textual constraint is selected.<br> \n        <br>\n        The text editor also allows sorting activities alphabetically and constraints based on their underlying templates. \n\n        <h3>Comprehension</h3>\n        The visual and textual models are linked, so <b>hovering</b> over elements in the textual editor highlights the visual constraint and related activities, and vice versa. This also applies to the <b>selection</b> of activities and constraints.\n\n\n        The following templates are currently supported by declare-js:\n        <br><br>\n        <h3>Template Overview</h3>\n        <table border="1" cellspacing="0" cellpadding="5" style="text-align: left;">\n            <thead>\n                <tr>\n                <th><b>Existence Templates </b><br><span>(one parameter)</span></th>\n                    <th colspan="2"><b>Relation Templates </b><br><span>(two parameters)</span></th>\n                </tr>\n            </thead>\n            <tbody>\n                \x3c!-- Row for Templates --\x3e\n                <tr>\n                    \x3c!-- Existence Templates --\x3e\n                    <td valign="top">\n                        Init/End <br>\n                        AtLeastOne | AtLeastTwo | AtLeastThree <br>\n                        ExactlyOne | ExactlyTwo | ExactlyThree <br>\n                        AtMostOne | AtMostTwo | AtMostThree <br>\n                        Absence\n                    </td>\n\n                    \x3c!-- Relation Templates - First Column --\x3e\n                    <td valign="top">\n                        RespondedExistence <br>\n                        CoExistence <br>\n                        [Chain | Alternate]Response <br>\n                        [Chain | Alternate]Precedence <br>\n                        [Chain | Alternate]Succession <br>\n                    </td>\n\n                    \x3c!-- Relation Templates - Second Column --\x3e\n                    <td valign="top">\n                        NotRespondedExistence <br>\n                        NotCoExistence <br>\n                        Not[Chain]Response <br>\n                        Not[Chain]Precedence <br>\n                        Not[Chain]Succession\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n\n        \n        '}}function _t(t){t.mode="MOVE",t.editMenu.setActive("MOVE"),t.existenceConstraintSubmenu.close(),t.relationConstraintSubmenu.close()}function Ft(t){t.mode="ACTIVITY_PLACEMENT",t.editMenu.setActive("ACTIVITY_PLACEMENT");var e=new b("",0,0);e.addToView(t.view.shape),e.shape.setAttribute("opacity",.33),t.mouseAttachment=e,t.existenceConstraintSubmenu.close(),t.relationConstraintSubmenu.close()}function Ht(t){if("EXISTENCE_CONSTRAINT_PLACEMENT"!==t.mode){t.mode="EXISTENCE_CONSTRAINT_PLACEMENT",t.editMenu.setActive("EXISTENCE_CONSTRAINT_PLACEMENT");var e=new L(null,t.existenceConstraintSubmenu.getTemplate());e.addToView(t.view.shape),e.shape.setAttribute("opacity",.33),e.label.shape.setAttribute("opacity",.33),t.mouseAttachment=e,t.existenceConstraintSubmenu.heading.innerHTML="Add Existence Constraint",t.existenceConstraintSubmenu.open(),t.relationConstraintSubmenu.close()}else _t(t)}function zt(t){"SELECT_RELATION_CONSTRAINT_START"!==t.mode?(t.mode="SELECT_RELATION_CONSTRAINT_START",t.editMenu.setActive("RELATION_CONSTRAINT_PLACEMENT"),t.existenceConstraintSubmenu.close(),t.relationConstraintSubmenu.heading.innerHTML="Add Relation Constraint",t.relationConstraintSubmenu.open()):_t(t)}function Vt(t){for(const e of t.selectedExistenceConstraints)t.declareModel.deleteExistenceConstraint(e.id,!0);for(const e of t.selectedRelationConstraints)t.declareModel.deleteRelationConstraint(e.id,!0);for(const e of t.selectedActivities)t.declareModel.deleteActivity(e.id);t.existenceConstraintSubmenu.close(),t.relationConstraintSubmenu.close()}function $t(t){t.declareModel.autoLayout=!0,d(t.declareModel),setTimeout((()=>{t.declareModel.autoLayout=!1,t.declareModel.alignActivities()}),1e4)}function Gt(t){if(confirm("Are you sure you want to delete this model and start from scratch?"))for(const e of t.declareModel.activities)t.declareModel.deleteActivity(e.id);else console.log("Deletion cancelled.")}function Xt(t){!function(t){t.fileInput.click()}(t)}function Yt(t){t.exportMenu.isOpen?t.exportMenu.close():t.exportMenu.open()}function Zt(t){t.declareModel.exportToJSON()}function Dt(t){const e=new Blob([t.declareModel.constraintsToString()],{type:"text/plain"}),i=document.createElement("a");i.href=URL.createObjectURL(e),i.download="declare_model.txt",i.click(),URL.revokeObjectURL(i.href)}function Wt(t){vt(t),jt(t)}function jt(t){t.enableEdit&&t.view.shape.firstChild.setAttribute("fill","none");const e=(new XMLSerializer).serializeToString(t.canvas),i=new Blob([e],{type:"image/svg+xml;charset=utf-8"}),s=document.createElement("a");s.href=URL.createObjectURL(i),s.download="canvas.svg",document.body.appendChild(s),s.click(),document.body.removeChild(s),t.enableEdit&&t.view.shape.firstChild.setAttribute("fill","url(#grid)")}function Ut(t){var e=t.zoomLevel;(e/=1.2)<.3&&(e=.3),Kt(e,t)}function Jt(t){var e=t.zoomLevel;(e*=1.2)>3&&(e=3),Kt(e,t)}function Kt(t,e){e.zoomLevel=t,e.view.shape.transform.baseVal.getItem(0).matrix.a=t,e.view.shape.transform.baseVal.getItem(0).matrix.d=t}function qt(t){for(const e of t.selectedExistenceConstraints)t.declareModel.deleteExistenceConstraint(e.id,!0);for(const e of t.selectedRelationConstraints)t.declareModel.deleteRelationConstraint(e.id,!0);for(const e of t.selectedActivities)t.declareModel.deleteActivity(e.id)}function Qt(t){for(const e of t.selectedActivities)e.lock()}function te(t){for(const e of t.selectedActivities)e.unlock()}function ee(t){t.declareModel.autoLayout=!0,d(t.declareModel),setTimeout((()=>{t.declareModel.autoLayout=!1,t.declareModel.alignActivities()}),1e4)}class ie{constructor(t){this.activities=new Set,this.relationConstraints=new Set,this.existenceConstraints=new Set,this.validExistenceTemplates=["Init","End","Absence","AtLeastOne","AtLeastTwo","AtLeastThree","ExactlyOne","ExactlyTwo","ExactlyThree","AtMostOne","AtMostTwo","AtMostThree"],this.alternativeExistenceTemplates=["Participation","AtLeast1","AtLeast2","AtLeast3","Exactly1","Exactly2","Exactly3","AtMost1","AtMost2","AtMost3"],this.existenceTemplateMapping={Participation:"AtLeastOne",AtLeast1:"AtLeastOne",AtLeast2:"AtLeastTwo",AtLeast3:"AtLeastThree",Exactly1:"ExactlyOne",Exactly2:"ExactlyTwo",Exactly3:"ExactlyThree",AtMost1:"AtMostOne",AtMost2:"AtMostTwo",AtMost3:"AtMostThree"},this.validRelationTemplates=["RespondedExistence","CoExistence","Response","AlternateResponse","ChainResponse","Precedence","AlternatePrecedence","ChainPrecedence","Succession","AlternateSuccession","ChainSuccession","NotRespondedExistence","NotCoExistence","NotResponse","NotChainResponse","NotPrecedence","NotChainPrecedence","NotSuccession","NotChainSuccession"],this.existenceConstraintMap=new Map,this.relationConstraintMap=new Map,this.validExistenceTemplates.forEach((t=>{this.existenceConstraintMap.set(t,new Set)})),this.validRelationTemplates.forEach((t=>{this.relationConstraintMap.set(t,new Set)})),this.declare=t,this.view=t.view.shape,this.id=C(),this.name=this.id,this.autoLayout=!0,this.alternativeTemplates=!1}addToView(){this.relationConstraints.forEach((t=>{t.addPathToView(this.view)})),this.activities.forEach((t=>{t.positionExistenceConstraints();for(const e of t.existenceConstraints)e.addToView(this.view),e.label.addToView(this.view);t.addToView(this.view)})),this.relationConstraints.forEach((t=>{t.addArrowsAndCirclesToView(this.view)}))}stringToConstraint(t){if(t){const r=/(\w+)\(([^,]+),? ?([^)]*)\)/,a=(t=t.replace(/[\"']/g,"")).match(r);if(a){const r=a[1],l=a[2],h=a[3]||null;let d=r;if(l!==h){if(this.alternativeExistenceTemplates.includes(r)&&(d=this.existenceTemplateMapping[r],this.alternativeTemplates||(this.alternativeTemplates=!0,alert("Please note that or more constraints have been slightly changed to match the set of supported templates (e.g., AtLeast1 vs. AtLeastOne)."))),this.validExistenceTemplates.includes(d)&&null==h){var e=this.createActivity(l),i=this.createExistenceConstraint(e,d);return f(i,e.existenceConstraints),this.existenceConstraintMap.has(d)?this.existenceConstraintMap.get(d).add(i):console.error(`Template ${d} not found in the map.`),i.id}if(this.validRelationTemplates.includes(r)&&null!=h){var s=this.createActivity(l),n=this.createActivity(h),o=this.createRelationConstraint(s,n,r);return f(o,s.relationConstraints),f(o,n.relationConstraints),this.relationConstraintMap.has(r)&&this.relationConstraintMap.get(r).add(o),o.id}}else console.log(`The constraint ${t} has been skipped due to a self-loop.`)}}}addActivity(t){if(!this.getActivity(t))return this.createActivity(t).id}addConstraint(t,e){const i=(t=t.replace(/[\"']/g,"")).match(/(\w+)\(([^,]+),? ?([^)]*)\)/);if(i){const s=i[2],n=i[3]||null;if(e&&!this.getActivity(s)||e&&n&&!this.getActivity(n))return console.log(this.getActivity(s)),void console.log(this.getActivity(n));let o=this.stringToConstraint(t);if(o)return this.addToView(),o}}createActivity(t,e,i){var s=this.getActivity(t);return s||(s=e&&i?new b(t,e,i):new b(t,100*Math.random()-50,100*Math.random()-50),this.declare.editor.addActivity(s),this.activities.add(s),this.addToView()),s}createExistenceConstraint(t,e){var i=this.getExistenceConstraint(e+"('"+t.toString()+"')");return i||(i=new L(t,e),this.declare.editor.addConstraint(i),this.existenceConstraints.add(i)),i}createRelationConstraint(t,e,i){var s=this.getRelationConstraint(i+"('"+t.toString()+"','"+e.toString()+"')");return s||(s=new E(t,e,i),this.declare.editor.addConstraint(s),this.relationConstraints.add(s)),s}deleteActivity(t){let e=Array.from(this.activities).find((({id:e})=>e===t));if(e){for(const t of e.existenceConstraints)this.deleteExistenceConstraint(t.id,!0);for(const t of e.relationConstraints)this.deleteRelationConstraint(t.id,!0);this.declare.editor.removeActivity(e),e.destroy(),this.activities.delete(e)}}deleteExistenceConstraint(t,e){let i=Array.from(this.existenceConstraints).find((({id:e})=>e===t));i&&(this.existenceConstraintMap.get(i.template).delete(i),e&&this.declare.editor.removeConstraint(i),i.destroy(),this.existenceConstraints.delete(i))}deleteRelationConstraint(t,e){let i=Array.from(this.relationConstraints).find((({id:e})=>e===t));i&&(this.relationConstraintMap.get(i.template).delete(i),e&&this.declare.editor.removeConstraint(i),i.destroy(),this.relationConstraints.delete(i))}getActivity(t){return Array.from(this.activities).find((e=>e.toString()===t))}getActivityById(t){return Array.from(this.activities).find((({id:e})=>e===t))}getExistenceConstraint(t){return Array.from(this.existenceConstraints).find((e=>e.toString()===t))}getExistenceConstraintById(t){return Array.from(this.existenceConstraints).find((({id:e})=>e===t))}getRelationConstraint(t){let e=Array.from(this.relationConstraints).find((e=>e.toString()===t));if(e)return e;if(t.includes("CoExistence")){let e=t.slice(0,t.indexOf("(")),i=t.slice(t.indexOf("(")+1,t.indexOf(",")),s=t.slice(t.indexOf(",")+1,t.indexOf(")"));return t=e+"("+s+","+i+")",Array.from(this.relationConstraints).find((e=>e.toString()===t))}}getRelationConstraintById(t){return Array.from(this.relationConstraints).find((({id:e})=>e===t))}constraintsToString(){var t;for(const e of this.existenceConstraints)t+=e.toString()+"\n";for(const e of this.relationConstraints)t+=e.toString()+"\n";return t}setName(t){this.name=t}alignActivities(){for(const t of this.activities)t.alignToGrid()}exportToJSON(t){const e=[...this.activities].map((t=>t.exportToJSON())),i=[...this.relationConstraints,...this.existenceConstraints].map((t=>t.exportToJSON())),s={name:this.name,tasks:e,constraints:i},n=new Blob([JSON.stringify(s)],{type:"application/json"}),o=URL.createObjectURL(n),r=document.createElement("a");r.setAttribute("href",o),r.setAttribute("download",t),r.click(),URL.revokeObjectURL(o),r.remove()}removeFrames(){for(this.activity of this.activities)this.activity.removeFrame()}removeHighlights(){for(this.activity of this.activities)this.activity.disableHighlight();for(this.existenceConstraint of this.existenceConstraints)this.existenceConstraint.disableHighlight();for(this.relationConstraint of this.relationConstraints)this.relationConstraint.disableHighlight()}generateRandomModel(t,e,i){const s=[];for(;t>0;)this.addActivity(p(5)),t--;let n=0;for(;e>0;){if(n>=20){console.log("Maximum attempts reached. It's unlikely to find a unique existence constraint.");break}if(0===this.activities.size){console.log("At least one activity is needed to generate an existence constraint.");break}let t=`${this.randomExistenceTemplate()}(${this.randomActivity()})`;s.includes(t)?n++:(s.push(t),e--)}for(n=0;i>0;){if(n>=20){console.log("Maximum attempts reached. It's unlikely to find a unique relation constraint.");break}if(this.activities.size<2){console.log("At least two activities are needed to generate a relation constraint.");break}let t=this.randomRelationTemplate(),e=this.randomActivity(),o=this.randomActivity(),r=`${t}(${e},${o})`;e===o||s.includes(r)?n++:(s.push(r),i--)}return s}randomExistenceTemplate(){const t=Math.floor(Math.random()*this.validExistenceTemplates.length);return this.validExistenceTemplates[t]}randomRelationTemplate(){const t=Math.floor(Math.random()*this.validRelationTemplates.length);return this.validRelationTemplates[t]}randomActivity(){const t=[...this.activities];return t[Math.floor(Math.random()*t.length)]}}new class{constructor(){this.enableEdit=!0,this.snapToGrid=!0,this.container=document.getElementById("declareContainer"),this.canvas,this.view,this.zoomLevel=1,this.mode,this.editor,this.editMenu,this.ioMenu,this.navigationMenu,this.helpMenu,this.contextMenu,this.fileInput,this.mouseAttachment,this.selectedActivities=new Set,this.selectedExistenceConstraints=new Set,this.selectedRelationConstraints=new Set,this.declareModel,this.init()}init(){this.container.classList.add("declare-container"),this.container.style.width="100%",this.container.style.height="100%",this.container.style.overflow="hidden",this.container.style.position="relative",this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,this.canvas=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.container.appendChild(this.canvas),this.canvas.classList.add("declare-canvas"),this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.position="relative",this.view=new x("g","view",this.width/2,this.height/2),this.view.shape.setAttribute("draggable","true"),this.view.addToView(this.canvas);let t=document.createElementNS("http://www.w3.org/2000/svg","rect");this.view.shape.appendChild(t),t.setAttribute("x",this.width/2-4825),t.setAttribute("y",-5e3-this.height/2),t.setAttribute("width",1e4),t.setAttribute("height",1e4),t.setAttribute("fill","url(#grid)"),this.canvas.appendChild(a),this.editor=new ft(this),this.declareModel=new ie(this),this.editMenu=new yt(this,["MOVE","ACTIVITY_PLACEMENT","EXISTENCE_CONSTRAINT_PLACEMENT","RELATION_CONSTRAINT_PLACEMENT","DELETE","AUTO_LAYOUT"],null,"vtl"),this.existenceConstraintSubmenu=new Et(this),this.relationConstraintSubmenu=new Tt(this),this.helpMenu=new yt(this,["HELP"],null,"htr"),this.exportMenu=new At(this,"120px",["JSON_EXPORT","SVG_EXPORT","TXT_EXPORT"]),this.ioMenu=new yt(this,["NEW","IMPORT","EXPORT"],null,"hbl"),this.navigationMenu=new yt(this,["ZOOM_IN","ZOOM_OUT"],null,"vbr");var e=this;this.helpMenu.menuContainer.addEventListener("click",(t=>{new Pt(this.container)})),this.editMenu.menuContainer.addEventListener("click",(t=>{this.mouseAttachment&&(this.declareModel.relationConstraints.has(this.mouseAttachment)||this.declareModel.existenceConstraints.has(this.mouseAttachment)||this.mouseAttachment.destroy()),i[t.target.closest(".menuButton").getAttribute("data-action")](e)})),this.ioMenu.menuContainer.addEventListener("click",(t=>{s[t.target.closest(".menuButton").getAttribute("data-action")](e)})),this.exportMenu.menuContainer.addEventListener("click",(t=>{n[t.target.closest(".menuButton").getAttribute("data-action")](e)})),this.navigationMenu.menuContainer.addEventListener("click",(t=>{o[t.target.closest(".menuButton").getAttribute("data-action")](e)})),this.contextMenu=new St(e,["DELETE","LOCK","UNLOCK"]),this.contextMenu.menuContainer.addEventListener("click",(t=>{r[t.target.getAttribute("data-action")](e),this.contextMenu.close()})),this.mode="MOVE",this.editMenu.setActive("MOVE"),this.fileInput=document.createElement("input"),this.fileInput.style.display="none",this.fileInput.setAttribute("type","file"),this.container.appendChild(this.fileInput),this.fileInput.addEventListener("change",(t=>function(t,e){const i=t.target.files[0];if(!i)return;const s=i.name.split(".").pop().toLowerCase();let n=!0;"json"===s?n=function(t,e){const i=new FileReader;return i.onload=function(t){for(const t of e.declareModel.activities)e.declareModel.deleteActivity(t.id);try{const i=JSON.parse(t.target.result);i&&i.tasks&&i.tasks.forEach((t=>{const i=t.name,s=t.posX,n=t.posY;e.declareModel.createActivity(i,s,n)})),i&&i.constraints&&i.constraints.forEach((t=>{const i=`${t.template}(${t.parameters.join(",")})`;e.declareModel.addConstraint(i),t.support,t.confidence,t.interestFactor}))}catch(t){console.error("Error parsing the JSON file:",t)}},i.readAsText(t),!1}(i,e):"csv"===s?n=function(t,e){const i=new FileReader;return i.onload=function(t){for(const t of e.declareModel.activities)e.declareModel.deleteActivity(t.id);t.target.result.split("\n").forEach((t=>{const i=t.split(";")[0].trim();i&&e.declareModel.addConstraint(i)}))},i.readAsText(t),!0}(i,e):"txt"===s?n=function(t,e){const i=new FileReader;return i.onload=function(t){for(const t of e.declareModel.activities)e.declareModel.deleteActivity(t.id);t.target.result.split("\n").forEach((t=>{t.trim()&&e.declareModel.addConstraint(t.trim())}))},i.readAsText(t),!0}(i,e):alert("Unsupported file format. Please upload a TXT, JSON or CSV file."),setTimeout((()=>{n&&(e.declareModel.autoLayout=!0,d(e.declareModel),setTimeout((()=>{e.declareModel.autoLayout=!1,e.declareModel.alignActivities()}),1e4))}),100)}(t,e))),It(this),function(t){var e=t.zoomLevel;t.view.shape.onwheel=function(i){i.preventDefault();var s=t.view.getPosition(),n=(i.clientX-s.x)/e,o=(i.clientY-s.y)/e;(i.wheelDelta?i.wheelDelta:-i.deltaY)>0?e*=1.2:e/=1.2,e>3?e=3:e<.3?e=.3:(s.x=i.clientX-n*e,s.y=i.clientY-o*e),t.view.shape.transform.baseVal.getItem(0).matrix.a=e,t.view.shape.transform.baseVal.getItem(0).matrix.d=e,t.view.setPosition(s),t.zoomLevel=e}}(this),this.enableEdit=!this.enableEdit,l(this)}switchMode(){l(this)}}})();